<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Create British National Grid reference from bounding boxes or convert grid
reference objects into bounding boxes."><title>Convert bounding boxes — bbox_to_bng • osbng</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Hanken_Grotesk-0.4.8/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert bounding boxes — bbox_to_bng"><meta property="og:description" content="Create British National Grid reference from bounding boxes or convert grid
reference objects into bounding boxes."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">osbng</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/osbng_overview.html">osbng Overview</a>
    <a class="dropdown-item" href="../articles/osbng_indexing_polygon_examples.html">Indexing Polygon Example</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/OrdnanceSurvey/osbng-r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Convert bounding boxes</h1>
      <small class="dont-index">Source: <a href="https://github.com/OrdnanceSurvey/osbng-r/blob/HEAD/R/indexing.R" class="external-link"><code>R/indexing.R</code></a></small>
      <div class="d-none name"><code>bng_to_bbox.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create British National Grid reference from bounding boxes or convert grid
reference objects into bounding boxes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">bbox_to_bng</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for numeric</span></span>
<span><span class="fu">bbox_to_bng</span><span class="op">(</span><span class="va">xmin</span>, <span class="va">ymin</span>, <span class="va">xmax</span>, <span class="va">ymax</span>, <span class="va">resolution</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for matrix</span></span>
<span><span class="fu">bbox_to_bng</span><span class="op">(</span><span class="va">x</span>, <span class="va">resolution</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for data.frame</span></span>
<span><span class="fu">bbox_to_bng</span><span class="op">(</span><span class="va">x</span>, <span class="va">resolution</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bng_to_bbox</span><span class="op">(</span><span class="va">bng_ref</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bng_to_grid_geom</span><span class="op">(</span><span class="va">bng_ref</span>, format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"geos"</span>, <span class="st">"sf"</span>, <span class="st">"wkt"</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>...</dt>
<dd><p>additional parameters, not currently used</p></dd>


<dt>xmin, ymin, xmax, ymax</dt>
<dd><p>numeric vector of bounding box coordinates</p></dd>


<dt>resolution</dt>
<dd><p>the resolution of the BNG reference expressed either as a
metre-based integer or as a string label</p></dd>


<dt>x</dt>
<dd><p>optional input of the bounding box as a matrix or data frame of
values. Either a numeric vector or object must be supplied.</p></dd>


<dt>bng_ref</dt>
<dd><p>vector of type <code>BNGReference</code> objects</p></dd>


<dt>format</dt>
<dd><p>character indicating the type of geometry object to return.
Default is "geos" while "sf" returns an object of class <code>sfc</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<ul><li><p><code>bng_to_bbox</code>: numeric vector of bounding easting and northing
coordinates. If multiple references are supplied to <code>bng_ref</code> then a
matrix of coordinates is returned.</p></li>
<li><p><code>bbox_to_bng</code>: list containing vectors of <code>BNGReference</code>
objects.</p></li>
<li><p><code>bng_to_grid_geom</code> converts the bounding box coordinates into a
polygon geometry object.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The relationship between the bounding box and the returned BNG grid squares
depends on the alignment of the bounding box with the BNG index system:</p>
<p>If the bounding box edges align with the BNG system (e.g. xmin, ymin, xmax,
ymax are multiples of the specified resolution), only the grid squares
entirely contained within the bounding box are returned. Grid squares that
intersect but are not fully contained within the bounding box are excluded.</p>
<p>If the bounding box edges are not aligned with the BNG system, grid squares
that are partially overlapped by the bounding box are also included. In this
case, the function ensures all relevant grid squares that the bounding box
touches are returned, including those at the edges.</p>
<p>Validates and normalises the bounding box coordinates to the BNG index system
extent. If bounding box coordinates fall outside of the BNG system extent,
the coordinates are snapped to the bounds of the BNG system.</p>
<p>Bounding boxes are expressed as four coordinates (min x, min y, max x, max
y). Coordinates must be in British National Grid projection (EPSG:27700).
These functions do not support coordinate transformations.</p>
<p>For matrix input, the first four columns are used as xmin, ymin, xmax, and
ymax, respectively. For <code>data.frame</code> input columns must be named "xmin",
"ymin", "xmax", and "ymax" or the first columns will be assumed.</p>
<p>To return the BNG grid squares within the bounding box of a geometry, see
<code><a href="geom_to_bng.html">geom_to_bng()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">bbox_to_bng</span><span class="op">(</span><span class="fl">400000</span>, <span class="fl">100000</span>, <span class="fl">500000</span>, <span class="fl">200000</span>, <span class="st">"50km"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;BNGReference[4] with Resolution=50km&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] &lt;SU SW&gt; &lt;SU SE&gt; &lt;SU NW&gt; &lt;SU NE&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">bbox_to_bng</span><span class="op">(</span><span class="fl">285137.06</span>, <span class="fl">78633.75</span>, <span class="fl">299851.01</span>, <span class="fl">86427.96</span>, <span class="fl">5000</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;BNGReference[9] with Resolution=5km&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] &lt;SX 8 7 NE&gt; &lt;SX 9 7 NW&gt; &lt;SX 9 7 NE&gt; &lt;SX 8 8 SE&gt; &lt;SX 9 8 SW&gt; &lt;SX 9 8 SE&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7] &lt;SX 8 8 NE&gt; &lt;SX 9 8 NW&gt; &lt;SX 9 8 NE&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">bng_to_bbox</span><span class="op">(</span><span class="fu"><a href="as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 4e+05 1e+05 5e+05 2e+05</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">bng_to_bbox</span><span class="op">(</span><span class="fu"><a href="as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU 3 1"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        [,1]   [,2]   [,3]   [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 430000 110000 440000 120000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">bng_to_bbox</span><span class="op">(</span><span class="fu"><a href="as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU 3 1 NE"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        [,1]   [,2]   [,3]   [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 435000 115000 440000 120000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">bng_to_bbox</span><span class="op">(</span><span class="fu"><a href="as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU 37289 15541"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        [,1]   [,2]   [,3]   [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 437289 115541 437290 115542</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">bng_to_grid_geom</span><span class="op">(</span><span class="fu"><a href="as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;geos_geometry[1]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] &lt;POLYGON ((400000 100000, 500000 100000, 500000 200000, 400000 200000, 400000 100000))&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">bng_to_grid_geom</span><span class="op">(</span><span class="fu"><a href="as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU 3 1"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;geos_geometry[1]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] &lt;POLYGON ((430000 110000, 440000 110000, 440000 120000, 430000 120000, 430000 110000))&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">bng_to_grid_geom</span><span class="op">(</span><span class="fu"><a href="as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU 3 1 NE"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;geos_geometry[1]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] &lt;POLYGON ((435000 115000, 440000 115000, 440000 120000, 435000 120000, 435000 115000))&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">bng_to_grid_geom</span><span class="op">(</span><span class="fu"><a href="as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU 37289 15541"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;geos_geometry[1]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] &lt;POLYGON ((437289 115541, 437290 115541, 437290 115542, 437289 115542, 437289 115541))&gt;</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Chris Jochem, Ordnance Survey Ltd.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

