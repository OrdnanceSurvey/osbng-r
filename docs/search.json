[{"path":"/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 Ordnance Survey Ltd Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"/articles/osbng_indexing_polygon_examples.html","id":"british-national-grid-indexing-polygon-examples","dir":"Articles","previous_headings":"","what":"British National Grid Indexing Polygon Examples","title":"Indexing Polygon Example","text":"key component osbng package indexing functionality. geom_to_bng geom_to_bng_intersection functions enable indexing geometries, represented using geos geometry objects, grid squares specified resolution. functions accept geos (optionally sf) objects following types: Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, GeometryCollection. geometry coordinates must encoded British National Grid (OSGB36) EPSG:27700 coordinate reference system. functions facilitate grid-based spatial analysis, enabling applications statistical aggregation, data visualisation, data interoperability. two functions differ operation: geom_to_bng returns British National Grid (BNG) grid squares intersected input geometry, geom_to_bng_intersection returns intersections (shared areas) input geometry grid square geometries. deciding two functions, consider whether decomposition input geometry BNG grid squares required. decomposition logic computationally expensive useful intersection input geometry grid square needed. approach supports spatial join optimisations, point--polygon polygon--polygon operations, using is_core value indexed geometry object. optimisations particularly valuable geospatial analysis medium large datasets distributed processing systems, geometries may colocated BNG references.","code":""},{"path":[]},{"path":"/articles/osbng_indexing_polygon_examples.html","id":"geom_to_bng","dir":"Articles","previous_headings":"British National Grid Indexing Polygon Examples > Indexing Functions Accepting Geometries","what":"geom_to_bng","title":"Indexing Polygon Example","text":"function returns list BNGReference objects representing BNG grid squares intersected input geometry. Note BNGReference objects deduplicated cases multiple parts multi-part geometry intersect grid square.","code":""},{"path":"/articles/osbng_indexing_polygon_examples.html","id":"geom_to_bng_intersection","dir":"Articles","previous_headings":"British National Grid Indexing Polygon Examples > Indexing Functions Accepting Geometries","what":"geom_to_bng_intersection","title":"Indexing Polygon Example","text":"function returns list objects representing decomposition input geometry BNG grid squares. Unlike geom_to_bng, deduplication occurs. multiple parts multi-part geometry intersect grid square, intersection part returned.","code":""},{"path":"/articles/osbng_indexing_polygon_examples.html","id":"geom_to_bng_intersection_explode","dir":"Articles","previous_headings":"British National Grid Indexing Polygon Examples > Indexing Functions Accepting Geometries","what":"geom_to_bng_intersection_explode","title":"Indexing Polygon Example","text":"convenience function applies geom_to_bng_intersection() geometry sf data.frame, returning flattened data.frame exploding list indexed geometries.","code":""},{"path":"/articles/osbng_indexing_polygon_examples.html","id":"examples","dir":"Articles","previous_headings":"British National Grid Indexing Polygon Examples","what":"Examples","title":"Indexing Polygon Example","text":"examples demonstrate application two indexing functions using London boundary administrative England Regions dataset provided Office National Statistics (ONS). Metadata dataset available ?osbng::. indexing functions applied geometries within sf spatial data frame.","code":""},{"path":"/articles/osbng_indexing_polygon_examples.html","id":"optional-sf-dependency","dir":"Articles","previous_headings":"British National Grid Indexing Polygon Examples","what":"Optional sf Dependency","title":"Indexing Polygon Example","text":"osbng fully compatible sf can seamlessly work data frames R, require sf hard dependency. exception geom_to_bng_intersection_explode, indexing functions can operate directly geos Geometry objects. allows use functions standard data structures (e.g., vectors, data frames) containing geos geometries. Check/confirm coordinate reference system used.","code":"library(osbng) library(sf) #> Linking to GEOS 3.9.1, GDAL 3.3.2, PROJ 7.2.1; sf_use_s2() is TRUE # Read the Office for National Statistics (ONS) England Regions GeoPackage # Create an sf data frame # See examples/data/metadata.json for more information about the data source gdf <- st_read(   system.file(\"extdata\",                \"London_Regions_December_2024_Boundaries_EN_BFC.gpkg\",                package = \"osbng\"),    quiet = TRUE)  # Filter the data frame columns gdf_london <- gdf[, c(\"RGN24CD\", \"RGN24NM\")]  # Return the data frame gdf_london #> Simple feature collection with 1 feature and 2 fields #> Geometry type: MULTIPOLYGON #> Dimension:     XY #> Bounding box:  xmin: 503571.5 ymin: 155854.3 xmax: 561957.5 ymax: 200933.6 #> Projected CRS: OSGB 1936 / British National Grid #>     RGN24CD RGN24NM                       geometry #> 1 E12000007  London MULTIPOLYGON (((531024.6 20... # osbng indexing functions require geometry coordinates to be specified  # in British National Grid (BNG) (OSGB36) cordinate reference system # EPSG:27700 # https://epsg.io/27700 st_crs(gdf_london) #> Coordinate Reference System: #>   User input: OSGB 1936 / British National Grid  #>   wkt: #> PROJCRS[\"OSGB 1936 / British National Grid\", #>     BASEGEOGCRS[\"OSGB 1936\", #>         DATUM[\"OSGB 1936\", #>             ELLIPSOID[\"Airy 1830\",6377563.396,299.3249646, #>                 LENGTHUNIT[\"metre\",1]]], #>         PRIMEM[\"Greenwich\",0, #>             ANGLEUNIT[\"degree\",0.0174532925199433]], #>         ID[\"EPSG\",4277]], #>     CONVERSION[\"British National Grid\", #>         METHOD[\"Transverse Mercator\", #>             ID[\"EPSG\",9807]], #>         PARAMETER[\"Latitude of natural origin\",49, #>             ANGLEUNIT[\"degree\",0.0174532925199433], #>             ID[\"EPSG\",8801]], #>         PARAMETER[\"Longitude of natural origin\",-2, #>             ANGLEUNIT[\"degree\",0.0174532925199433], #>             ID[\"EPSG\",8802]], #>         PARAMETER[\"Scale factor at natural origin\",0.9996012717, #>             SCALEUNIT[\"unity\",1], #>             ID[\"EPSG\",8805]], #>         PARAMETER[\"False easting\",400000, #>             LENGTHUNIT[\"metre\",1], #>             ID[\"EPSG\",8806]], #>         PARAMETER[\"False northing\",-100000, #>             LENGTHUNIT[\"metre\",1], #>             ID[\"EPSG\",8807]]], #>     CS[Cartesian,2], #>         AXIS[\"(E)\",east, #>             ORDER[1], #>             LENGTHUNIT[\"metre\",1]], #>         AXIS[\"(N)\",north, #>             ORDER[2], #>             LENGTHUNIT[\"metre\",1]], #>     USAGE[ #>         SCOPE[\"Engineering survey, topographic mapping.\"], #>         AREA[\"United Kingdom (UK) - offshore to boundary of UKCS within 49°45'N to 61°N and 9°W to 2°E; onshore Great Britain (England, Wales and Scotland). Isle of Man onshore.\"], #>         BBOX[49.75,-9,61.01,2.01]], #>     ID[\"EPSG\",27700]]"},{"path":"/articles/osbng_indexing_polygon_examples.html","id":"geom_to_bng-1","dir":"Articles","previous_headings":"British National Grid Indexing Polygon Examples > Optional sf Dependency","what":"geom_to_bng","title":"Indexing Polygon Example","text":"Returns list BNGReference objects representing BNG grid squares intersected input geometry. BNGReference provides functions access manipulate reference. includes following: print(x, compact = TRUE): BNG reference whitespace removed. bng_to_grid_geom(): Returns grid square geos sf Polygon. information BNG Reference object, see ?as_bng_reference. resulting data frame includes list column containing BNG reference objects intersect London region. make easier map grid squares, need transform data frame reference row. easiest way using tidyr::unnest, example uses alternative package available. new data frame contains row BNG grid squares intersected original region geometry. column still contains BNGReference objects, can extract information reference, geometry. Now grid square geometries organised spatial data frame, can visualise data demonstrate concept assigning geometries BNG grid squares. Since sf object, ggplot2::geom_sf tmap can used. demonstrate alternative without dependencies.","code":"# Return the BNG grid squares intersected by the London Region # Uses `geom_to_bng()` # Uses a 5km grid square resolution # Returns a list of `BNGRefernce` objects for each geometry gdf_london$bng_ref_5km <- geom_to_bng(gdf_london, resolution = \"5km\") # Expand the bng_ref_5km column to separate rows for each BNG Reference object df <- data.frame(id = rep(seq_len(nrow(gdf_london)),                            lengths(gdf_london$bng_ref_5km)),                   bng_ref_5km = as_bng_reference(unlist(gdf_london$bng_ref_5km)))  # Create a data frame of London and combine with BNG observations df_london <- st_drop_geometry(gdf_london)  # Drop the original bng_ref_5km column df_london <- df_london[, !names(df_london) %in% c(\"bng_ref_5km\")]  df_london <- cbind(df_london[df$id, ], df) # Alternative approach requiring `tidyr` - NOT RUN  df_london <- gdf_london %>%    unnest(bng_ref_5km) %>%   st_drop_geometry() # Using the data frame with the set of BNG grid squares # Get the geometry for each grid square df_london$geometry <- bng_to_grid_geom(df_london$bng_reference, format = \"sf\")  # Convert this data frame to an `sf` object with the grid square geometry gdf_london_exp <- st_sf(df_london)  # Return the first few rows head(gdf_london_exp) #> Simple feature collection with 6 features and 4 fields #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 515000 ymin: 155000 xmax: 550000 ymax: 160000 #> Projected CRS: OSGB 1936 / British National Grid #>       RGN24CD RGN24NM id bng_reference                       geometry #> 1   E12000007  London  1   <TQ 1 5 NE> POLYGON ((515000 155000, 52... #> 1.1 E12000007  London  1   <TQ 2 5 NE> POLYGON ((525000 155000, 53... #> 1.2 E12000007  London  1   <TQ 3 5 NW> POLYGON ((530000 155000, 53... #> 1.3 E12000007  London  1   <TQ 3 5 NE> POLYGON ((535000 155000, 54... #> 1.4 E12000007  London  1   <TQ 4 5 NW> POLYGON ((540000 155000, 54... #> 1.5 E12000007  London  1   <TQ 4 5 NE> POLYGON ((545000 155000, 55... # Plot the original London Region plot(st_geometry(gdf_london),       col = \"#ffc61e\",       border = \"#fff\",      main = \"BNG Grid Squares at 5km Resolution Intersected by London Region\",      cex.main = .8,       extent = st_bbox(gdf_london_exp))  # Add the indexed and exploded London regions plot(st_geometry(gdf_london_exp),       col = NA,       border = \"#333333\",       add = TRUE)  # Add feature labels at grid square centroids coords <- st_coordinates(st_centroid(gdf_london_exp)) text(coords[, 1],      coords[, 2],      gdf_london_exp$bng_reference, cex = 0.4)"},{"path":"/articles/osbng_indexing_polygon_examples.html","id":"geom_to_bng_intersection_explode-1","dir":"Articles","previous_headings":"British National Grid Indexing Polygon Examples > Optional sf Dependency","what":"geom_to_bng_intersection_explode","title":"Indexing Polygon Example","text":"Decomposes geometry input sf data.frame bounded presence BNG grid squares specified resolution. Applies geom_to_bng_intersection function active geometry column input data frame, expected set OSGB36 / British National Grid coordinate reference system (CRS) (EPSG:27700). resulting indexed geometries exploded individual rows, row containing new column part nested list: bng_ref, is_core, geometry. input geometry column replaced geometry column. input geometry column can retrieved required joining resulting data frame original data frame index (reset), using feature identifier. Dropping original geometry column reduces memory usage simplifies resulting object. non-geometry columns input retained resulting sf data frame. columns added exploded data frame: bng_ref: BNGReference object representing grid square corresponding decomposition. is_core: Boolean flag indicating whether grid square geometry entirely contained input geometry. relevant Polygon geometries helps distinguish “core” (fully inside)“edge” (partially overlapping) grid squares. geometry: geometry representing intersection input geometry grid square. can one number geometry types depending overlap. is_core True, geom grid square geometry. spatial data frame contains decomposed London Region’s geometry decomposed BNG grid squares. Using expanded set records demonstrates is_core property grid squares fully contained original geometry.","code":"# Create a new data frame of the London Region # Filter the data frame columns gdf_london <- gdf[, c(\"RGN24CD\", \"RGN24NM\")]  # Decompose the London Region into a simplified representation # bounded by its presence in each BNG grid square at a 5km resolution # Uses the gdf_to_bng_geom_intersection_explode; sf required gdf_london_exp <- geom_to_bng_intersection_explode(gdf_london,                                                     resolution = \"5km\")  head(gdf_london_exp) #> Simple feature collection with 6 features and 4 fields #> Geometry type: GEOMETRY #> Dimension:     XY #> Bounding box:  xmin: 516482.1 ymin: 155854.3 xmax: 546026.9 ymax: 160000 #> Projected CRS: OSGB 1936 / British National Grid #>     RGN24CD RGN24NM bng_reference is_core                       geometry #> 1 E12000007  London   <TQ 1 5 NE>   FALSE POLYGON ((516934.9 160000, ... #> 2 E12000007  London   <TQ 2 5 NE>   FALSE POLYGON ((529998.6 157302.2... #> 3 E12000007  London   <TQ 3 5 NW>   FALSE POLYGON ((534994.8 159511.3... #> 4 E12000007  London   <TQ 3 5 NE>   FALSE MULTIPOLYGON (((535881.7 16... #> 5 E12000007  London   <TQ 4 5 NW>   FALSE POLYGON ((544965.3 156784.3... #> 6 E12000007  London   <TQ 4 5 NE>   FALSE POLYGON ((546019.3 159994.4... # Plot the indexed and expanded London Region spatial data frame plot(gdf_london_exp[\"is_core\"],      border = \"#fff\",      col = c(\"#009ade\", \"#ff1f5b\")[gdf_london_exp$is_core + 1],      main = \"Decomposition of the London Region into BNG Grid Squares at 5km Resolution\",      cex.main = .75)  legend(0.8, 0.3,        title = \"is_core\",        legend = c(\"True\", \"False\"),        fill = c(\"#ff1f5b\", \"#009ade\"))"},{"path":"/articles/osbng_indexing_polygon_examples.html","id":"alternative-geom_to_bng_intersection","dir":"Articles","previous_headings":"British National Grid Indexing Polygon Examples > Optional sf Dependency","what":"Alternative: geom_to_bng_intersection","title":"Indexing Polygon Example","text":"example demonstrates data frame gdf_london_exp derived using verbose logic via geom_to_bng_intersection function. Starting original London Region, intersecting BNG grid squares identified decomposed geometry exploded separate rows. Given list column BNG reference objects, several ways expand flatten multiple rows. One option using tidyr::unnest_wider followed tidyr::unnest. example code shows alternative approach without dependency tidyr.","code":"# Create a new data frame of the London Region # Filter the data frame columns gdf_london <- gdf[, c(\"RGN24CD\", \"RGN24NM\")]  # Decompose the London Region intoa simplified representation bounded by its # presence in each BNG grid square at a 5km resolution. # Uses the geom_to_bng_intersection function # Returns a list of nested lists gdf_london$bng_ref_5km <- geom_to_bng_intersection(gdf_london,                                                     resolution = \"5km\")  # Drop original geometry column gdf_london <- st_drop_geometry(gdf_london) # Alternative syntax - NOT RUN # Expand the bng_ref_5km column to separate rows for each object. gdf_london <- cbind(\"RGN24CD\" = gdf_london[, c(\"RGN24CD\")],                      data.frame(gdf_london$bng_ref_5km))  # Convert this data frame to an `sf` object with the grid square geometry gdf_london_exp <- st_sf(gdf_london)  # Return the first few rows of the GeoDataFrame head(gdf_london_exp) # Alternative approach requiring `tidyr` - NOT RUN gdf_london_exp <- gdf_london %>%   unnest_wider(bng_ref_5km) %>%   unnest(cols = c(BNGReference, is_core, geom)) %>%   st_sf()"},{"path":"/articles/osbng_overview.html","id":"bng-index-system","dir":"Articles","previous_headings":"","what":"BNG Index System","title":"osbng Overview","text":"OS BNG index system, also known OS National Grid, rectangular Cartesian 700 x 1300km grid system based upon transverse Mercator projection. BNG, locations specified using coordinates, eastings (x) northings (y), measured meters defined origin point (0, 0) southwest Isles Scilly coast Cornwall, England. Values increase northeast, covering mainland GB surrounding islands. BNG structured using hierarchical system grid squares various resolutions. highest level, grid divides GB 100 km 100 km squares, identified bya two-letter code. Successive levels resolution subdivide grid squares finder detail, individual 1-meter squares.","code":"list_bng_bounds() #>    xmin    ymin    xmax    ymax  #>       0       0  700000 1300000 list_bng_prefixes() #>  [1] \"SV\" \"SW\" \"SX\" \"SY\" \"SZ\" \"TV\" \"TW\" \"SQ\" \"SR\" \"SS\" \"ST\" \"SU\" \"TQ\" \"TR\" \"SL\" #> [16] \"SM\" \"SN\" \"SO\" \"SP\" \"TL\" \"TM\" \"SF\" \"SG\" \"SH\" \"SJ\" \"SK\" \"TF\" \"TG\" \"SA\" \"SB\" #> [31] \"SC\" \"SD\" \"SE\" \"TA\" \"TB\" \"NV\" \"NW\" \"NX\" \"NY\" \"NZ\" \"OV\" \"OW\" \"NQ\" \"NR\" \"NS\" #> [46] \"NT\" \"NU\" \"OQ\" \"OR\" \"NL\" \"NM\" \"NN\" \"NO\" \"NP\" \"OL\" \"OM\" \"NF\" \"NG\" \"NH\" \"NJ\" #> [61] \"NK\" \"OF\" \"OG\" \"NA\" \"NB\" \"NC\" \"ND\" \"NE\" \"OA\" \"OB\" \"HV\" \"HW\" \"HX\" \"HY\" \"HZ\" #> [76] \"JV\" \"JW\" \"HQ\" \"HR\" \"HS\" \"HT\" \"HU\" \"JQ\" \"JR\" \"HL\" \"HM\" \"HN\" \"HO\" \"HP\" \"JL\" #> [91] \"JM\""},{"path":"/articles/osbng_overview.html","id":"resolutions","dir":"Articles","previous_headings":"","what":"Resolutions","title":"osbng Overview","text":"osbng supports “standard” BNG meter-based resolutions, represent powers ten 1m 100km (1m, 10m, 100m, 1km, 10km, 100km). also supports “intermediate” quadtree resolutions (5m, 50m, 500m, 5km, 50km), identified ordinal (NE, SE, WS, NW) BNG reference direction suffix. resolution argument functions can expressed meter-based integer label.","code":"list_bng_resolution(lbl = TRUE) #>  [1] \"100km\" \"50km\"  \"10km\"  \"5km\"   \"1km\"   \"500m\"  \"100m\"  \"50m\"   \"10m\"   #> [10] \"5m\"    \"1m\" list_bng_resolution(lbl = FALSE) #>  [1] 1e+05 5e+04 1e+04 5e+03 1e+03 5e+02 1e+02 5e+01 1e+01 5e+00 1e+00"},{"path":"/articles/osbng_overview.html","id":"bngreference","dir":"Articles","previous_headings":"","what":"BNGReference","title":"osbng Overview","text":"BNG index system uses BNG references, also known simply grid tile references, identify index locations across Great Britain (GB) grid squares various resolutions. osbng package implements custom BNGReference object. object validates encapsulates BNG reference, providing functions access manipulate reference. functions accepting returning BNG references enforce use class. Functions within osbng vectorised compatible pipes (%>%, |>) efficient processing multiple BNG references.","code":"# Convert a BNG reference string into a `BNGReference` object bng_ref <- as_bng_reference(\"SU 372 155\")  bng_ref #> <BNGReference[1] with Resolution=100m> #> [1] <SU 372 155> # The BNG reference string as a compact string print(bng_ref, compact = TRUE) #> <BNGReference[1] with Resolution=100m> #> [1] <SU372155> # The BNG reference string as a formatted string (default behaviour) print(bng_ref, compact = FALSE) #> <BNGReference[1] with Resolution=100m> #> [1] <SU 372 155> # The BNG resolution expressed in metres get_bng_resolution(bng_ref) #> [1] 100 # The BNG resolution expressed as a descriptive label get_bng_resolution_string(bng_ref) #> [1] \"100m\""},{"path":"/articles/osbng_overview.html","id":"indexing","dir":"Articles","previous_headings":"","what":"Indexing","title":"osbng Overview","text":"core component osbng ability index work coordinates geometries BNG index system. includes: Encoding easting northing coordinates BNGReference objects specified resolution. Decoding BNGReference objects back coordiantes, bounding boxes, grid squares geos geometries. Indexing boudning boxes geos geometries grid squares specified resolution spatial analysis.","code":"# Easting and northing coordinates x <- 437293 y <- 115543  # Convert easting and northing to BNGReference at 1km resolution bng_ref <- xy_to_bng(x, y, resolution = \"1km\")  bng_ref #> <BNGReference[1] with Resolution=1km> #> [1] <SU 37 15> # Decode BNGReference back into coordinates # Default \"position\" is \"lower-left\" bng_to_xy(bng_ref) #>        [,1]   [,2] #> [1,] 437000 115000 # Decode BNGRefernece back into coordinates # Centroid of the grid square # \"position\" can be one of \"lower-left\", \"upper-left\", \"lower-right\", \"upper-right\", \"centre\" bng_to_xy(bng_ref, position = \"centre\") #>        [,1]   [,2] #> [1,] 437500 115500 # Return the grid square bounding box coordinates for the BNGRference object bng_to_bbox(bng_ref) #>        [,1]   [,2]   [,3]   [,4] #> [1,] 437000 115000 438000 116000 # Return the grid square as a geos geometry object for the BNGReference object # Alternatively return the geometry as WKT or `sf` object bng_to_grid_geom(bng_ref) #> <geos_geometry[1]> #> [1] <POLYGON ((437000 115000, 438000 115000, 438000 116000, 437000 116000, 437000 115000))>"},{"path":"/articles/osbng_overview.html","id":"indexing-geos-geometries","dir":"Articles","previous_headings":"Indexing","what":"Indexing geos Geometries","title":"osbng Overview","text":"geom_to_bng geom_to_bng_intersection functions enable indexing geometries, represented using geos Geometry objects, grid squares specified resolution. functions accept geos Geometry objects following types: Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, GeometryCollection. coordinates must encoded British National Grid (OSGB36) EPSG:27700 coordinate reference system. functions facilitate grid-based spatial analysis, enabling applications statistical aggregation, data visualisation, data interoperability. two functions differ operation: geom_to_bng returns BNG grid squares intersected input geometry. geom_to_bng_intersection returns intersections (shared geometries) input geometry grid square geometries. See vignette indexing examples etail operation two functions.","code":""},{"path":"/articles/osbng_overview.html","id":"point","dir":"Articles","previous_headings":"Indexing > Indexing geos Geometries","what":"Point","title":"osbng Overview","text":"","code":"# Easting and northing coordinates x <- 437293 y <- 115543  # Construct a geos Point geometry from easting and northing coordinates geom <- geos::geos_make_point(x, y)  # Return the BNGReference object for the geometry at a 5km resolution geom_to_bng(geom = geom, resolution = \"5km\") #> <BNGReference[1] with Resolution=5km> #> [1] <SU 3 1 NE> # Return the indexed results for the geometry at a 5km resolution # For a Point geometry, the intersection geometry is the same as the original geometry # The is_core property will always be False for a Point geometry geom_to_bng_intersection(geom = geom, resolution = \"5km\") #> [[1]] #> [[1]]$BNGReference #> <BNGReference[1] with Resolution=5km> #> [1] <SU 3 1 NE> #>  #> [[1]]$is_core #> [1] FALSE #>  #> [[1]]$geom #> <geos_geometry[1]> #> [1] <POINT (437293 115543)>"},{"path":"/articles/osbng_overview.html","id":"linestring","dir":"Articles","previous_headings":"Indexing > Indexing geos Geometries","what":"LineString","title":"osbng Overview","text":"","code":"# Create a geos LineString geometry from Well Known Text (WKT) geom <- geos::geos_read_wkt(\"LINESTRING (436171.8 114893.7, 437861.3 116130.0)\")  # Return a list of the BNGReference object(s) intersected by the geometry at a 1km resolution geom_to_bng(geom = geom, resolution = \"1km\") #> [[1]] #> <BNGReference[4] with Resolution=1km> #> [1] <SU 36 14> <SU 36 15> <SU 37 15> <SU 37 16> # Return a nested list of the indexing results for the geometry at a 1km resolution # The is_core property will always be False for a LineString geometry geom_to_bng_intersection(geom = geom, resolution = \"1km\") #> [[1]] #> [[1]]$BNGReference #> <BNGReference[4] with Resolution=1km> #> [1] <SU 36 14> <SU 36 15> <SU 37 15> <SU 37 16> #>  #> [[1]]$is_core #> [1] FALSE FALSE FALSE FALSE #>  #> [[1]]$geom #> <geos_geometry[4]> #> [1] <LINESTRING (436171.8 114893.7, 436317.06721 115000)>   #> [2] <LINESTRING (436317.06721 115000, 437000 115499.73946)> #> [3] <LINESTRING (437000 115499.73946, 437683.6449 116000)>  #> [4] <LINESTRING (437683.6449 116000, 437861.3 116130)>"},{"path":"/articles/osbng_overview.html","id":"visualise-the-results","dir":"Articles","previous_headings":"Indexing > Indexing geos Geometries > LineString","what":"Visualise the results","title":"osbng Overview","text":"example visualising results, use sf library spatial data handling, suggested package works well osbng.","code":"# Return the indexed results bng_idx_geoms <- geom_to_bng_intersection(geom = geom,                                            resolution = \"1km\",                                            format = \"sf\")  # Store the indexed results as a spatial data frame bng_idx_geoms <- st_sf(data.frame(bng_idx_geoms))  # Store the intersected BNGReference grid squares for context bng_grid_geoms <- bng_to_grid_geom(bng_idx_geoms$bng_reference,                                     format = \"sf\") # Categorical colours # https://github.com/OrdnanceSurvey/GeoDataViz-Toolkit/blob/master/Colours/GDV%20colour%20palettes_v0.9.1.pdf catcols <- c(\"#FF1F5B\", \"#009ADE\", \"#FFC61E\", \"#AF58BA\")  # Plot geometries representing the intersection between the geometry and the BNG grid squares plot(st_geometry(bng_idx_geoms),      col = catcols,      lwd = 3,      extent = st_bbox(bng_grid_geoms),      main = \"Decomposition of LineString Geometry into BNG Grid Squares at a 1km Resolution\",      cex.main = .8,      axes = TRUE,      xlab = \"Easting\",      ylab = \"Northing\")  # Plot intersected BNGReference grid squares for context plot(st_geometry(bng_grid_geoms),      col = NA,      border = \"#00000075\",      lty = \"dashed\",      add = TRUE)"},{"path":"/articles/osbng_overview.html","id":"polygon","dir":"Articles","previous_headings":"Indexing > Indexing geos Geometries","what":"Polygon","title":"osbng Overview","text":"","code":"# Create a geos Polygon geometry from Well Known Text (WKT) geom <- geos::geos_read_wkt(\"POLYGON ((436661.45305455 115784.01571607, 437629.10896848 116112.11767069, 438229.486575 115953.45344189, 437990.51082297 114935.84767816, 436630.11197232 115085.69722758, 436661.45305455 115784.01571607))\") # Return a list of the BNGRefernce objects intersected by the geometry at a 500m resolution geom_to_bng(geom, resolution = 500) #> [[1]] #> <BNGReference[14] with Resolution=500m> #>  [1] <SU 37 14 NW> <SU 37 14 NE> <SU 38 14 NW> <SU 36 15 SE> <SU 37 15 SW> #>  [6] <SU 37 15 SE> <SU 38 15 SW> <SU 36 15 NE> <SU 37 15 NW> <SU 37 15 NE> #> [11] <SU 38 15 NW> <SU 37 16 SW> <SU 37 16 SE> <SU 38 16 SW> # Return a nested list of the indexed geometry and BNGReference objects for the geometry at 500m resolution geom_to_bng_intersection(geom, resolution = 500) #> [[1]] #> [[1]]$BNGReference #> <BNGReference[14] with Resolution=500m> #>  [1] <SU 37 14 NW> <SU 37 14 NE> <SU 38 14 NW> <SU 36 15 SE> <SU 37 15 SW> #>  [6] <SU 37 15 SE> <SU 38 15 SW> <SU 36 15 NE> <SU 37 15 NW> <SU 37 15 NE> #> [11] <SU 38 15 NW> <SU 37 16 SW> <SU 37 16 SE> <SU 38 16 SW> #>  #> [[1]]$is_core #>  [1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE #> [13] FALSE FALSE #>  #> [[1]]$geom #> <geos_geometry[14]> #>  [1] <POLYGON ((437408.10837 115000, 437500 115000, 437500 114989.87803, 437408.10837 115000))>                                  #>  [2] <POLYGON [437500 114936...438000 115000]>                                                                                   #>  [3] <POLYGON ((438000 114976.25446, 438000 115000, 438005.57643 115000, 438000 114976.25446))>                                  #>  [4] <POLYGON ((436630.11197 115085.69723, 436648.70621 115500, 437000 115500, 437000 115044.95362, 436630.11197 115085.69723))> #>  [5] <POLYGON [437000 115000...437500 115500]>                                                                                   #>  [6] <POLYGON ((437500 115000, 438000 115000, 438000 115500, 437500 115500, 437500 115000))>                                     #>  [7] <POLYGON ((438005.57643 115000, 438000 115000, 438000 115500, 438122.99703 115500, 438005.57643 115000))>                   #>  [8] <POLYGON ((437000 115898.80643, 437000 115500, 436648.70621 115500, 436661.45305 115784.01572, 437000 115898.80643))>       #>  [9] <POLYGON [437000 115500...437500 116000]>                                                                                   #> [10] <POLYGON ((437500 115500, 438000 115500, 438000 116000, 437500 116000, 437500 115500))>                                     #> [11] <POLYGON [438000 115500...438229 116000]>                                                                                   #> [12] <POLYGON ((437500 116068.34084, 437500 116000, 437298.44551 116000, 437500 116068.34084))>                                  #> [13] <POLYGON [437500 116000...438000 116112]>                                                                                   #> [14] <POLYGON ((438053.3567 116000, 438000 116000, 438000 116014.10079, 438053.3567 116000))>"},{"path":"/articles/osbng_overview.html","id":"visualise-the-results-1","dir":"Articles","previous_headings":"Indexing > Indexing geos Geometries > Polygon","what":"Visualise the results","title":"osbng Overview","text":"","code":"# Return the indexed results bng_idx_geoms <- geom_to_bng_intersection(geom = geom,                                            resolution = 500,                                            format = \"sf\")  # Store the indexed results as a spatial data frame bng_idx_geoms <- st_sf(data.frame(bng_idx_geoms))  # Store the intersected BNGReference grid squares for context bng_grid_geoms <- bng_to_grid_geom(bng_idx_geoms$bng_reference,                                     format = \"sf\") # Plot core and edge geoemtries plot(bng_idx_geoms[\"is_core\"],      border = \"#fff\",      col = c(\"#009ade\", \"#ff1f5b\")[bng_idx_geoms$is_core + 1],      main = \"Decomposition of Polygon Geometry into BNG Grid Squares at a 500m Resolution\",      cex.main = .8,      axes = TRUE,      xlab = \"Easting\",      ylab = \"Northing\")  legend(0.05, 1,         title = \"is_core\",        legend = c(\"True\", \"False\"),          fill = c(\"#ff1f5b\", \"#009ade\"))"},{"path":"/articles/osbng_overview.html","id":"hierarchy","dir":"Articles","previous_headings":"","what":"Hierarchy","title":"osbng Overview","text":"osbng provides functionality navigate hierarchical structure BNG index system. Traversal hierarchy enabled functions providing methods return parent children BNGReference objects specified resolutions. Parent child definitions: Parent: parent BNGReference object grid square next higher (.e. coarser) resolution level contains current reference. example, parent 1km grid square reference 5km grid square contains . Children: children BNGReference object grid squares next lower (.e. finer) resolution level contained within current reference. example, children 10km grid square reference 5km grid squares contains. parent child derivation defaults next higher lower lower resolution, respectively, supported resolution hiearchy can specified.","code":"# Convert a BNG reference string into a BNGReference object bng_ref <- as_bng_reference(\"SU 372 155\")  # The resolution of the BNGReference object as a descriptive label get_bng_resolution_string(bng_ref) #> [1] \"100m\""},{"path":"/articles/osbng_overview.html","id":"parent","dir":"Articles","previous_headings":"Hierarchy","what":"Parent","title":"osbng Overview","text":"","code":"# Return the parent BNGReference object at the next higher resolution bng_to_parent(bng_ref) #> <BNGReference[1] with Resolution=500m> #> [1] <SU 37 15 NW> # Return the parent BNGReference object at a custom higher resolution bng_to_parent(bng_ref, resolution = \"50km\") #> <BNGReference[1] with Resolution=50km> #> [1] <SU SW>"},{"path":"/articles/osbng_overview.html","id":"visualise-the-results-2","dir":"Articles","previous_headings":"Hierarchy > Parent","what":"Visualise the results","title":"osbng Overview","text":"","code":"# Return the parent BNGReference object bng_ref_parent <- bng_to_parent(bng_ref)  # Store the BNGReference grid squares bng_geom <- bng_to_grid_geom(bng_ref, format = \"sf\") bng_parent_geom <- bng_to_grid_geom(bng_ref_parent, format = \"sf\")  # Plot the parent BNGReference grid square plot(st_geometry(bng_parent_geom),      col = \"gray80\",      border = \"#00000075\",      lty = \"dashed\",      lwd = 2,      main = \"500m Resolution Parent of a 100m Resolution BNG Grid Square\",      cex.main = .9,      axes = TRUE,      xlab = \"Easting\",      ylab = \"Northing\")  # Plot the original BNGReference grid square plot(st_geometry(bng_geom),      col = \"#AF58BA\",      add = TRUE)"},{"path":"/articles/osbng_overview.html","id":"children","dir":"Articles","previous_headings":"Hierarchy","what":"Children","title":"osbng Overview","text":"","code":"# Return the children of the BNGReference object at the next lower resolution bng_to_children(bng_ref) #> [[1]] #> <BNGReference[4] with Resolution=50m> #> [1] <SU 372 155 SW> <SU 372 155 SE> <SU 372 155 NW> <SU 372 155 NE> # Return the children of the BNGReference object at a custom lower resolution bng_to_children(bng_ref, resolution = \"10m\") #> [[1]] #> <BNGReference[100] with Resolution=10m> #>   [1] <SU 3720 1550> <SU 3721 1550> <SU 3722 1550> <SU 3723 1550> <SU 3724 1550> #>   [6] <SU 3725 1550> <SU 3726 1550> <SU 3727 1550> <SU 3728 1550> <SU 3729 1550> #>  [11] <SU 3720 1551> <SU 3721 1551> <SU 3722 1551> <SU 3723 1551> <SU 3724 1551> #>  [16] <SU 3725 1551> <SU 3726 1551> <SU 3727 1551> <SU 3728 1551> <SU 3729 1551> #>  [21] <SU 3720 1552> <SU 3721 1552> <SU 3722 1552> <SU 3723 1552> <SU 3724 1552> #>  [26] <SU 3725 1552> <SU 3726 1552> <SU 3727 1552> <SU 3728 1552> <SU 3729 1552> #>  [31] <SU 3720 1553> <SU 3721 1553> <SU 3722 1553> <SU 3723 1553> <SU 3724 1553> #>  [36] <SU 3725 1553> <SU 3726 1553> <SU 3727 1553> <SU 3728 1553> <SU 3729 1553> #>  [41] <SU 3720 1554> <SU 3721 1554> <SU 3722 1554> <SU 3723 1554> <SU 3724 1554> #>  [46] <SU 3725 1554> <SU 3726 1554> <SU 3727 1554> <SU 3728 1554> <SU 3729 1554> #>  [51] <SU 3720 1555> <SU 3721 1555> <SU 3722 1555> <SU 3723 1555> <SU 3724 1555> #>  [56] <SU 3725 1555> <SU 3726 1555> <SU 3727 1555> <SU 3728 1555> <SU 3729 1555> #>  [61] <SU 3720 1556> <SU 3721 1556> <SU 3722 1556> <SU 3723 1556> <SU 3724 1556> #>  [66] <SU 3725 1556> <SU 3726 1556> <SU 3727 1556> <SU 3728 1556> <SU 3729 1556> #>  [71] <SU 3720 1557> <SU 3721 1557> <SU 3722 1557> <SU 3723 1557> <SU 3724 1557> #>  [76] <SU 3725 1557> <SU 3726 1557> <SU 3727 1557> <SU 3728 1557> <SU 3729 1557> #>  [81] <SU 3720 1558> <SU 3721 1558> <SU 3722 1558> <SU 3723 1558> <SU 3724 1558> #>  [86] <SU 3725 1558> <SU 3726 1558> <SU 3727 1558> <SU 3728 1558> <SU 3729 1558> #>  [91] <SU 3720 1559> <SU 3721 1559> <SU 3722 1559> <SU 3723 1559> <SU 3724 1559> #>  [96] <SU 3725 1559> <SU 3726 1559> <SU 3727 1559> <SU 3728 1559> <SU 3729 1559>"},{"path":"/articles/osbng_overview.html","id":"visualise-the-results-3","dir":"Articles","previous_headings":"Hierarchy > Children","what":"Visualise the results","title":"osbng Overview","text":"","code":"# Return the BNGReference object for the children at 10m resolution bng_refs_children <- bng_to_children(bng_ref, resolution = \"10m\")  # Store the BNGReference grid squares bng_geom <- bng_to_grid_geom(bng_ref, format = \"sf\") bng_children_geom <- bng_to_grid_geom(bng_refs_children[[1]], format = \"sf\")  # Plot the parent BNGReference grid square plot(st_geometry(bng_children_geom),      col = \"gray80\",      border = \"#00000075\",      lty = \"dashed\",      main = \"10m Resolution Children of a 100m Resolution BNG Grid Square\",      cex.main = .9,      axes = TRUE,      xlab = \"Easting\",      ylab = \"Northing\")  # Plot the original BNGReference grid square plot(st_geometry(bng_geom),      col = NA,      border = \"#AF58BA\",      lwd = 3,      add = TRUE)"},{"path":"/articles/osbng_overview.html","id":"traversal","dir":"Articles","previous_headings":"","what":"Traversal","title":"osbng Overview","text":"Traversal functionality osbng includes calculating distances neighbours within BNG index system. supports spatial analyses distance-constrained nearest neighbour searches “distance within” queries offering: Generation k-discs k-rings around give grid square. Identification neighbouring grid squares checking adjacency. Calculating distance grid square centroids edges. Retrieving grid squares within specified absolute distance.","code":"# Convert a BNG reference string into a BNGReference object bng_ref <- as_bng_reference(\"SU 372 155\")"},{"path":"/articles/osbng_overview.html","id":"k-disc","dir":"Articles","previous_headings":"Traversal","what":"K-disc","title":"osbng Overview","text":"","code":"# Return a list of BNGReference objects representing a filled disc around the BNGReference object #  up to a grid distance k, including the given central BNGReference object bng_kdisc(bng_ref, k = 2) #> [[1]] #> <BNGReference[25] with Resolution=100m> #>  [1] <SU 370 153> <SU 371 153> <SU 372 153> <SU 373 153> <SU 374 153> #>  [6] <SU 370 154> <SU 371 154> <SU 372 154> <SU 373 154> <SU 374 154> #> [11] <SU 370 155> <SU 371 155> <SU 372 155> <SU 373 155> <SU 374 155> #> [16] <SU 370 156> <SU 371 156> <SU 372 156> <SU 373 156> <SU 374 156> #> [21] <SU 370 157> <SU 371 157> <SU 372 157> <SU 373 157> <SU 374 157> # Return a k-disc of the BNGReference object at a grid distance of k=2 bng_ref_kdisc = bng_kdisc(bng_ref, k = 2)  # Store the BNGReference grid squares bng_geom <- bng_to_grid_geom(bng_ref, format = \"sf\") bng_kdisc_geoms <- bng_to_grid_geom(bng_ref_kdisc[[1]], format = \"sf\")  # Plot the BNGReference grid squares in the k-disc plot(st_geometry(bng_kdisc_geoms),      col = \"gray80\",      border = \"#00000075\",      lty = \"dashed\",      main = \"K-Disc Around a BNG Grid Square Where k=2\",      cex.main = .9,      axes = TRUE,      xlab = \"Easting\",      ylab = \"Northing\")  # Plot the original BNGReference grid square for context plot(st_geometry(bng_geom),      col = \"#009ade\",      add = TRUE)"},{"path":"/articles/osbng_overview.html","id":"k-ring","dir":"Articles","previous_headings":"Traversal","what":"K-ring","title":"osbng Overview","text":"","code":"# Return a list of BNGReference objects representing a hollow ring around around  #  the BNGReference object at a grid distance k bng_kring(bng_ref, k = 1) #> [[1]] #> <BNGReference[8] with Resolution=100m> #> [1] <SU 371 154> <SU 372 154> <SU 373 154> <SU 371 155> <SU 373 155> #> [6] <SU 371 156> <SU 372 156> <SU 373 156> # Return a k-ring of the BNGReference object at a grid distance of k=2 bng_ref_kring = bng_kring(bng_ref, k = 3)  # Store the BNGReference grid squares bng_geom <- bng_to_grid_geom(bng_ref, format = \"sf\") bng_kring_geoms <- bng_to_grid_geom(bng_ref_kring[[1]], format = \"sf\")  # Plot the BNGReference grid squares in the k-disc plot(st_geometry(bng_kring_geoms),      col = \"gray80\",      border = \"#00000075\",      lty = \"dashed\",      main = \"K-Ring Around a BNG Grid Square Where k=3\",      cex.main = .9,      axes = TRUE,      xlab = \"Easting\",      ylab = \"Northing\")  # Plot the original BNGReference grid square for context plot(st_geometry(bng_geom),      col = \"#009ade\",      add = TRUE)"},{"path":"/articles/osbng_overview.html","id":"neighbours","dir":"Articles","previous_headings":"Traversal","what":"Neighbours","title":"osbng Overview","text":"","code":"# Convert BNG reference strings into BNGReference objects bng_ref1 <- as_bng_reference(\"SU 372 155\") bng_ref2 <- as_bng_reference(\"SU 371 155\") # Check if the two BNGReference objects are neighbours bng_is_neighbour(bng_ref1, bng_ref2) #> [1] TRUE"},{"path":"/articles/osbng_overview.html","id":"distance","dir":"Articles","previous_headings":"Traversal","what":"Distance","title":"osbng Overview","text":"","code":"# Convert BNG reference strings into BNGReference objects bng_ref1 <- as_bng_reference(\"SX\") bng_ref2 <- as_bng_reference(\"SU 1 2\")  # Return the distance between two BNGReference objects in metres # The default distance is calculated as the Euclidean distance between the centroids of the grid squares bng_distance(bng_ref1, bng_ref2) #>          [,1] #> [1,] 181245.7 # Return the distance between two BNGReference objects in metres # edge_to_edge=True calculates the distance between the edges of the grid squares bng_distance(bng_ref1, bng_ref2, edge_to_edge = TRUE) #>          [,1] #> [1,] 111803.4 # Convert BNG reference stringsinto a BNGReference object bng_ref <- as_bng_reference(\"ST 3 8\")  # Return all BNGReference objects within a given distance d of the input BNGReference object bng_dwithin(bng_ref, d = 1000) #> [[1]] #> <BNGReference[9] with Resolution=10km> #> [1] <ST 2 7> <ST 3 7> <ST 4 7> <ST 2 8> <ST 3 8> <ST 4 8> <ST 2 9> <ST 3 9> #> [9] <ST 4 9>"},{"path":"/articles/osbng_overview.html","id":"grids","dir":"Articles","previous_headings":"","what":"Grids","title":"osbng Overview","text":"osbng provides additional several convenience functions generate BNG grid square data within specified bounds spatial data frame. functions require sf package available. Grid square data covering BNG index system bounds provided 100km, 50km, 10km, 5km 1km resolutions. functions named bng_grid_<resolution>(). Optionally, functions can take bound box argument restrict grids specific bounds. Resolutions finer 1km supported functions avoid accidental memory intensive processing.","code":"# Create an sf data frame of 100km resolution BNGReference object features gdf <- bng_grid_100km()  gdf #> Simple feature collection with 91 features and 1 field #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 0 ymin: 0 xmax: 7e+05 ymax: 1300000 #> Projected CRS: OSGB 1936 / British National Grid #> First 10 features: #>    bng_reference                       geometry #> 1           <SV> POLYGON ((0 0, 1e+05 0, 1e+... #> 2           <SW> POLYGON ((1e+05 0, 2e+05 0,... #> 3           <SX> POLYGON ((2e+05 0, 3e+05 0,... #> 4           <SY> POLYGON ((3e+05 0, 4e+05 0,... #> 5           <SZ> POLYGON ((4e+05 0, 5e+05 0,... #> 6           <TV> POLYGON ((5e+05 0, 6e+05 0,... #> 7           <TW> POLYGON ((6e+05 0, 7e+05 0,... #> 8           <SQ> POLYGON ((0 1e+05, 1e+05 1e... #> 9           <SR> POLYGON ((1e+05 1e+05, 2e+0... #> 10          <SS> POLYGON ((2e+05 1e+05, 3e+0... # Create an sf data frame of 1km resolution BNGReference object features within a bunding box  # Custom bounding box coordinates # (xmin, ymin, xmax, ymax) gdf <- bng_grid_1km(529476, 179654, 532170, 181116)  gdf #> Simple feature collection with 12 features and 1 field #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 529000 ymin: 179000 xmax: 533000 ymax: 182000 #> Projected CRS: OSGB 1936 / British National Grid #> First 10 features: #>    bng_reference                       geometry #> 1     <TQ 29 79> POLYGON ((529000 179000, 53... #> 2     <TQ 30 79> POLYGON ((530000 179000, 53... #> 3     <TQ 31 79> POLYGON ((531000 179000, 53... #> 4     <TQ 32 79> POLYGON ((532000 179000, 53... #> 5     <TQ 29 80> POLYGON ((529000 180000, 53... #> 6     <TQ 30 80> POLYGON ((530000 180000, 53... #> 7     <TQ 31 80> POLYGON ((531000 180000, 53... #> 8     <TQ 32 80> POLYGON ((532000 180000, 53... #> 9     <TQ 29 81> POLYGON ((529000 181000, 53... #> 10    <TQ 30 81> POLYGON ((530000 181000, 53..."},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Chris Jochem. Maintainer, author. Ordnance Survey Ltd. Copyright holder, funder. Steve Kingston. Contributor. Kate New. Contributor. Tom Peterken. Contributor.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Ordnance Survey (2025). osbng: Geospatial Grid Indexing Interaction British National Grid. Ordnance Survey Ltd. R package version 0.2.0, https://github.com/OrdnanceSurvey/osbng-r.","code":"@Manual{,   title = {{osbng}: Geospatial Grid Indexing and Interaction with the British National Grid},   author = {{Ordnance Survey}},   organization = {Ordnance Survey Ltd},   year = {2025},   note = {R package version 0.2.0},   url = {https://github.com/OrdnanceSurvey/osbng-r}, }"},{"path":"/index.html","id":"osbng-british-national-grid-references-in-r","dir":"","previous_headings":"","what":"Geospatial Grid Indexing with the British National Grid","title":"Geospatial Grid Indexing with the British National Grid","text":"R library Ordnance Survey’s British National Grid (BNG) index system. library provides tools working BNG, rectangular Cartesian grid system used identify index locations across Great Britain grid squares various resolutions.","code":""},{"path":"/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Geospatial Grid Indexing with the British National Grid","text":"osbng R package provides programmatic interface BNG, supporting efficient grid-based indexing spatial analysis. enables applications statistical aggregation, data visualisation, data interoperability using BNG grid references. Designed developers working geospatial data context Great Britain, library offers tools simplify working BNG, facilitating technical integration geospatial workflows practical exploration index system’s structure. package supports ‘standard’ BNG metre-based resolutions, represent powers ten 1m 100km (1m, 10m, 100m, 1km, 10km, 100km). also supports ‘intermediate’ quadtree resolutions (5m, 50m, 500m, 5km, 50km), identified ordinal (NE, SE, SW, NW) BNG reference direction suffix.","code":""},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Geospatial Grid Indexing with the British National Grid","text":"Currently, can install latest version osbng GitHub : installed, load package use :","code":"remotes::install_github(\"OrdnanceSurvey/osbng-r\") library(osbng)"},{"path":"/index.html","id":"complimetary-tools","dir":"","previous_headings":"Installation","what":"Complimetary tools","title":"Geospatial Grid Indexing with the British National Grid","text":"osbng-py, Python package broad parity R package. osbng-grids, BNG grid data GeoParquet GeoPackage (GPKG) formats. mosaic, Databricks package providing geospatial grid indexing using BNG Apache Spark.","code":""},{"path":"/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Geospatial Grid Indexing with the British National Grid","text":"osbng package supports different interactions BNG index system (e.g. indexing, hierarchy, traversal). high-level summary task provided :","code":""},{"path":"/index.html","id":"bng-reference","dir":"","previous_headings":"Usage","what":"BNG Reference","title":"Geospatial Grid Indexing with the British National Grid","text":"osbng implements custom BNG reference object, BNGReference. BNGReference object validates reference provides access custom functions work reference.","code":"library(osbng)  bng_ref <- as_bng_reference(\"ST57SE\")  print(bng_ref) #> <BNGReference[1] with Resolution=5km> #> [1] <ST 5 7 SE>  get_bng_resolution(bng_ref) #> [1] 5000  get_bng_resolution_string(bng_ref) #> [1] \"5km\""},{"path":"/index.html","id":"indexing","dir":"","previous_headings":"Usage","what":"Indexing","title":"Geospatial Grid Indexing with the British National Grid","text":"Provides ability index work coordinates geometries BNG index system. includes: Encoding easting northing coordinates BNGReference objects specified resolution. Decoding BNGReference objects back coordinates, bounding boxes grid squares geos geometries. Indexing bounding boxes geos geometries grid squares specified resolution spatial analysis.   following example demonstrates round trip constructing BNGReference object easting northing coordinates, decoding back coordinates, bounding box, geos geometry:","code":"bng_ref <- xy_to_bng(easting = 356976, northing = 171421, resolution = \"5km\")  bng_to_xy(bng_ref, position = \"lower-left\") #>        [,1]   [,2] #> [1,] 355000 170000  bng_to_bbox(bng_ref) #>        [,1]   [,2]   [,3]   [,4] #> [1,] 355000 170000 360000 175000  bng_to_grid_geom(bng_ref, \"wkt\") #> [1] \"POLYGON ((355000 170000, 360000 170000, 360000 175000, 355000 175000, 355000 170000))\""},{"path":"/index.html","id":"hierarchy","dir":"","previous_headings":"Usage","what":"Hierarchy","title":"Geospatial Grid Indexing with the British National Grid","text":"Provides functionality navigate hierarchical structure BNG index system. includes: Returning parents children BNGReference objects specified resolutions. following example returns parent BNGReference:","code":"bng_ref <- as_bng_reference(\"ST5671SE\")  get_bng_resolution(bng_ref) #> [1] 500  bng_to_parent(bng_ref, resolution = \"10km\") #> <BNGReference[1] with Resolution=10km> #> [1] <ST 5 7>"},{"path":"/index.html","id":"traversal","dir":"","previous_headings":"Usage","what":"Traversal","title":"Geospatial Grid Indexing with the British National Grid","text":"Provides functionality traversing calculating distances within BNG index system. supports spatial analyses distance-constrained nearest neighbour searches ‘distance within’ queries offering: Generation k-discs k-rings around given grid square. Identification neighbouring grid squares checking adjacency. Calculating distance grid square centroids. Retrieving grid squares within specified absolute distance. following example creates hollow ring grid squares distance k grid squares:","code":"bng_kring(as_bng_reference(\"SU1234\"), k = 2) #> [[1]] #> <BNGReference[16] with Resolution=1km> #>  [1] <SU 10 32> <SU 11 32> <SU 12 32> <SU 13 32> <SU 14 32> <SU 10 33> #>  [7] <SU 14 33> <SU 10 34> <SU 14 34> <SU 10 35> <SU 14 35> <SU 10 36> #> [13] <SU 11 36> <SU 12 36> <SU 13 36> <SU 14 36>"},{"path":"/index.html","id":"grids","dir":"","previous_headings":"Usage","what":"Grids","title":"Geospatial Grid Indexing with the British National Grid","text":"Provides functionality generate BNG grid square data within specified bounds. includes: Grid square data covering BNG index system bounds 100km, 50km, 10km, 5km 1km resolutions. Grid squares can filtered specific regions interest. functionality requires sf package available. following example constructs sf data frame:","code":"library(sf) #> Linking to GEOS 3.9.1, GDAL 3.3.2, PROJ 7.2.1; sf_use_s2() is TRUE  bng_grid_100km() #> Simple feature collection with 91 features and 1 field #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 0 ymin: 0 xmax: 7e+05 ymax: 1300000 #> Projected CRS: OSGB 1936 / British National Grid #> First 10 features: #>    bng_reference                       geometry #> 1           <SV> POLYGON ((0 0, 1e+05 0, 1e+... #> 2           <SW> POLYGON ((1e+05 0, 2e+05 0,... #> 3           <SX> POLYGON ((2e+05 0, 3e+05 0,... #> 4           <SY> POLYGON ((3e+05 0, 4e+05 0,... #> 5           <SZ> POLYGON ((4e+05 0, 5e+05 0,... #> 6           <TV> POLYGON ((5e+05 0, 6e+05 0,... #> 7           <TW> POLYGON ((6e+05 0, 7e+05 0,... #> 8           <SQ> POLYGON ((0 1e+05, 1e+05 1e... #> 9           <SR> POLYGON ((1e+05 1e+05, 2e+0... #> 10          <SS> POLYGON ((2e+05 1e+05, 3e+0..."},{"path":"/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"Geospatial Grid Indexing with the British National Grid","text":"Please raise issue discuss features, bugs, ask general questions.","code":""},{"path":"/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Geospatial Grid Indexing with the British National Grid","text":"osbng licensed terms MIT License.","code":""},{"path":"/reference/BNGReference.html","id":null,"dir":"Reference","previous_headings":"","what":"BNG Reference objects — BNGReference","title":"BNG Reference objects — BNGReference","text":"Functions support working objects type BNGReference.","code":""},{"path":"/reference/BNGReference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"BNG Reference objects — BNGReference","text":"","code":"# S3 method for BNGReference [(x, i)  # S3 method for BNGReference [[(x, i)  # S3 method for BNGReference [(x, i) <- value  # S3 method for BNGReference [[(x, i) <- value  # S3 method for BNGReference c(...)  # S3 method for BNGReference unique(x, incomparables = FALSE, ...)  # S3 method for BNGReference as.data.frame(x, ...)"},{"path":"/reference/BNGReference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"BNG Reference objects — BNGReference","text":"x Object class BNGReference. Record selection. value suitable replacement value type BNGReference. ... Additional parameters. incomparables vector values compared. See unique.","code":""},{"path":"/reference/BNGReference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"BNG Reference objects — BNGReference","text":"vector type BNGReference.","code":""},{"path":"/reference/BNGReference.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"BNG Reference objects — BNGReference","text":"BNG structured using hierarchical system grid squares various resolutions. highest level, grid divided 100 km 100 km squares, identified two-letter code. Successive levels resolution subdivide grid squares finer detail, individual 1-meter squares.","code":""},{"path":[]},{"path":"/reference/BNGReference.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"BNG Reference objects — BNGReference","text":"","code":"x <- as_bng_reference(c(\"TQ1234\", \"SU5678\"))  x[1] #> <BNGReference[1] with Resolution=1km> #> [1] <TQ 12 34>  x[2] <- as_bng_reference(\"SU56\") x #> <BNGReference[2] with multiple resolutions> #> [1] <TQ 12 34> <SU 5 6>"},{"path":"/reference/Regions.html","id":null,"dir":"Reference","previous_headings":"","what":"Region Boundaries for London — Regions","title":"Region Boundaries for London — Regions","text":"file (London_Regions_December_2024_Boundaries_EN_BFC.gpkg) contains digital vector boundaries London Region England December 2024. boundaries available : (BFC) Full resolution - clipped coastline (Mean High Water mark). coordinate reference system British National Grid (OSGB36; EPSG:27700). Contains Ordnance Survey ONS Intellectual Property Rights. Licenced Open Government Licence (OGLv3).","code":""},{"path":"/reference/Regions.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Region Boundaries for London — Regions","text":"GeoPackage one layer, 1 rows 8 columns: fid Row index. RGN24CD Character. Region GSS code. RGN24NM Character. Standardised Region name. BNG_E Centroid eastings British National Grid. BNG_N Centroid northings British National Grid. LONG Centroid longitude coordinate. LAT Centroid latitude coordinate. GlobalID Database management.","code":""},{"path":"/reference/Regions.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Region Boundaries for London — Regions","text":"Office National Statistics (ONS), released 16 February 2025, Regions (December 2024) Boundaries EN BFC, ONS Open Geography Portal.","code":""},{"path":"/reference/as_bng_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Create BNG reference objects — as_bng_reference","title":"Create BNG reference objects — as_bng_reference","text":"Convert test user input (strings) custom object handling British National Grid (BNG) references.","code":""},{"path":"/reference/as_bng_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create BNG reference objects — as_bng_reference","text":"","code":"as_bng_reference(bng_ref, ...)  # S3 method for default as_bng_reference(bng_ref, ...)  # S3 method for BNGReference as_bng_reference(bng_ref, ...)  # S3 method for character as_bng_reference(bng_ref, ...)  is_bng_reference(bng_ref)"},{"path":"/reference/as_bng_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create BNG reference objects — as_bng_reference","text":"bng_ref character vector grid references created tested. ... Additional parameters. currently used.","code":""},{"path":"/reference/as_bng_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create BNG reference objects — as_bng_reference","text":"object type BNGReference.","code":""},{"path":"/reference/as_bng_reference.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create BNG reference objects — as_bng_reference","text":"Converts BNG reference string BNGReference object, ensuring type consistency across package. functions accepting returning BNG references enforce use class. BNG structured using hierarchical system grid squares various resolutions. highest level, grid divided 100 km 100 km squares, identified two-letter code. Successive levels resolution subdivide grid squares finer detail, individual 1-meter squares. package supports 'standard' 'intermediate' quadtree resolutions: 100km, 50km, 10km, 5km, 1km, 500m, 100m, 50m, 10m, 5m 1m.","code":""},{"path":[]},{"path":"/reference/as_bng_reference.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create BNG reference objects — as_bng_reference","text":"","code":"as_bng_reference(\"TQ1234\") #> <BNGReference[1] with Resolution=1km> #> [1] <TQ 12 34>  as_bng_reference(c(\"TQ1234\", \"SU5678\")) #> <BNGReference[2] with Resolution=1km> #> [1] <TQ 12 34> <SU 56 78>"},{"path":"/reference/bng_distance.html","id":null,"dir":"Reference","previous_headings":"","what":"Distance calculations — bng_distance","title":"Distance calculations — bng_distance","text":"Compute Euclidean distances BNG references distance-based neighbours lists.","code":""},{"path":"/reference/bng_distance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Distance calculations — bng_distance","text":"","code":"bng_dwithin(bng_ref, d, ...)  bng_distance(bng_ref1, bng_ref2, by_element = FALSE, edge_to_edge = FALSE)"},{"path":"/reference/bng_distance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Distance calculations — bng_distance","text":"bng_ref object class BNGReference. d numeric. Distance expressed metres. ... additional parameters. currently used. bng_ref1, bng_ref2 object BNGReference by_element logical. TRUE, return vector distance pair BNG references. error raised BNGReference objects length. Default FALSE, return dense matrix pairwise distances. edge_to_edge Logical. distances measured edges grid references? Default FALSE use centroid.","code":""},{"path":"/reference/bng_distance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Distance calculations — bng_distance","text":"list containing unordered vector BNGReference objects around given grid square within absolute distance d. by_element FALSE  bng_distance returns dense numeric matrix dimension length(x) length(y); otherwise returns numeric vector length x y error raised lengths x y unequal. Distances involving invalid references NA.","code":""},{"path":"/reference/bng_distance.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Distance calculations — bng_distance","text":"bng_dwithin returns grids squares part boundary within distance d part bng_ref's boundary.","code":""},{"path":"/reference/bng_distance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Distance calculations — bng_distance","text":"","code":"bng_dwithin(as_bng_reference(\"SU1234\"), 1000) #> [[1]] #> <BNGReference[9] with Resolution=1km> #> [1] <SU 11 33> <SU 12 33> <SU 13 33> <SU 11 34> <SU 12 34> <SU 13 34> <SU 11 35> #> [8] <SU 12 35> <SU 13 35> #>   bng_dwithin(as_bng_reference(\"SU1234\"), 1001) #> [[1]] #> <BNGReference[21] with Resolution=1km> #>  [1] <SU 11 32> <SU 12 32> <SU 13 32> <SU 10 33> <SU 11 33> <SU 12 33> #>  [7] <SU 13 33> <SU 14 33> <SU 10 34> <SU 11 34> <SU 12 34> <SU 13 34> #> [13] <SU 14 34> <SU 10 35> <SU 11 35> <SU 12 35> <SU 13 35> <SU 14 35> #> [19] <SU 11 36> <SU 12 36> <SU 13 36> #>    ref1 <- as_bng_reference(\"SE1433\")  bng_distance(ref1, as_bng_reference(\"SE1631\")) #>          [,1] #> [1,] 2828.427  bng_distance(ref1, as_bng_reference(\"SENW\")) #>          [,1] #> [1,] 42807.71  ref2 <- as_bng_reference(c(\"SE1533\", \"SE1631\", \"SE\")) #> Warning: Varying resolutions detected.  bng_distance(ref1, ref2) #>      [,1]     [,2]     [,3] #> [1,] 1000 2828.427 39147.16  bng_distance(ref2) #>           [,1]      [,2]     [,3] #> [1,]     0.000  2236.068 38242.65 #> [2,]  2236.068     0.000 38268.79 #> [3,] 38242.646 38268.786     0.00  ref3 <- as_bng_reference(c(\"SE1433\", \"SE1244\"))  bng_distance(ref3, ref2) #>          [,1]      [,2]     [,3] #> [1,]  1000.00  2828.427 39147.16 #> [2,] 11401.75 13601.471 37901.19  bng_distance(ref3, ref2[1:2], by_element = TRUE) #> [1]  1000.00 13601.47  bng_distance(ref1, ref2, edge_to_edge = TRUE) #>      [,1]     [,2] [,3] #> [1,]    0 1414.214    0"},{"path":"/reference/bng_grid.html","id":null,"dir":"Reference","previous_headings":"","what":"Map BNG References to Spatial Objects — bng_grid","title":"Map BNG References to Spatial Objects — bng_grid","text":"Generate spatial data frame BNG references grid square geometries.","code":""},{"path":"/reference/bng_grid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Map BNG References to Spatial Objects — bng_grid","text":"","code":"bng_grid_100km(xmin, ymin, xmax, ymax, ...)  bng_grid_50km(xmin, ymin, xmax, ymax, ...)  bng_grid_10km(xmin, ymin, xmax, ymax, ...)  bng_grid_5km(xmin, ymin, xmax, ymax, ...)  bng_grid_1km(xmin, ymin, xmax, ymax, ...)"},{"path":"/reference/bng_grid.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Map BNG References to Spatial Objects — bng_grid","text":"xmin, ymin, xmax, ymax Optional bounding box coordinates. ... Additional arguments. currently used.","code":""},{"path":"/reference/bng_grid.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Map BNG References to Spatial Objects — bng_grid","text":"Data frame object type sf grid reference BNGReference object grid square polygon geometry.","code":""},{"path":"/reference/bng_grid.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Map BNG References to Spatial Objects — bng_grid","text":"convenience functions generate spatial data frame BNG references grid square geometries pre-determined resolutions. function combines bbox_to_bng() bng_to_grid_geom() data frame. Optionally, grid can defined bounding box area interest. bounding box omitted, grid squares within valid bounds BNG returned. selected resolutions provided avoid excessively large data frames. additional spatial data files resolutions, please see osbng-grids GitHub repo. sf package required function.","code":""},{"path":[]},{"path":"/reference/bng_grid.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Map BNG References to Spatial Objects — bng_grid","text":"","code":"bng_grid_100km() #> Simple feature collection with 91 features and 1 field #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 0 ymin: 0 xmax: 7e+05 ymax: 1300000 #> Projected CRS: OSGB 1936 / British National Grid #> First 10 features: #>    bng_reference                       geometry #> 1           <SV> POLYGON ((0 0, 1e+05 0, 1e+... #> 2           <SW> POLYGON ((1e+05 0, 2e+05 0,... #> 3           <SX> POLYGON ((2e+05 0, 3e+05 0,... #> 4           <SY> POLYGON ((3e+05 0, 4e+05 0,... #> 5           <SZ> POLYGON ((4e+05 0, 5e+05 0,... #> 6           <TV> POLYGON ((5e+05 0, 6e+05 0,... #> 7           <TW> POLYGON ((6e+05 0, 7e+05 0,... #> 8           <SQ> POLYGON ((0 1e+05, 1e+05 1e... #> 9           <SR> POLYGON ((1e+05 1e+05, 2e+0... #> 10          <SS> POLYGON ((2e+05 1e+05, 3e+0...  bng_grid_1km(529476, 179654, 532170, 181116) #> Simple feature collection with 12 features and 1 field #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 529000 ymin: 179000 xmax: 533000 ymax: 182000 #> Projected CRS: OSGB 1936 / British National Grid #> First 10 features: #>    bng_reference                       geometry #> 1     <TQ 29 79> POLYGON ((529000 179000, 53... #> 2     <TQ 30 79> POLYGON ((530000 179000, 53... #> 3     <TQ 31 79> POLYGON ((531000 179000, 53... #> 4     <TQ 32 79> POLYGON ((532000 179000, 53... #> 5     <TQ 29 80> POLYGON ((529000 180000, 53... #> 6     <TQ 30 80> POLYGON ((530000 180000, 53... #> 7     <TQ 31 80> POLYGON ((531000 180000, 53... #> 8     <TQ 32 80> POLYGON ((532000 180000, 53... #> 9     <TQ 29 81> POLYGON ((529000 181000, 53... #> 10    <TQ 30 81> POLYGON ((530000 181000, 53..."},{"path":"/reference/bng_kring.html","id":null,"dir":"Reference","previous_headings":"","what":"Spatial neighbourhoods in the British National Grid index system — bng_kring","title":"Spatial neighbourhoods in the British National Grid index system — bng_kring","text":"Identify neighbours hollow ring solid disc grid distance 'k' target BNG reference.","code":""},{"path":"/reference/bng_kring.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Spatial neighbourhoods in the British National Grid index system — bng_kring","text":"","code":"bng_kring(bng_ref, k, ...)  bng_kdisc(bng_ref, k, ...)"},{"path":"/reference/bng_kring.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Spatial neighbourhoods in the British National Grid index system — bng_kring","text":"bng_ref object type BNGReference k numeric value measuring number grid squares traversed ring input BNG reference ... additional parameters. currently used","code":""},{"path":"/reference/bng_kring.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Spatial neighbourhoods in the British National Grid index system — bng_kring","text":"list containing unordered collection objects type BNGReference within neighbourhood around given grid reference.","code":""},{"path":"/reference/bng_kring.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Spatial neighbourhoods in the British National Grid index system — bng_kring","text":"K-rings hollow rings grid squares grid distance k k-discs filled areas around given grid square grid distance k. bng_kdisc includes given BNG Reference (.e. central grid square). event bng_ref along edge corner valid BNG area, return BNG references ring/disc outside valid BNG range returned.","code":""},{"path":"/reference/bng_kring.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Spatial neighbourhoods in the British National Grid index system — bng_kring","text":"","code":"bng_kring(as_bng_reference(\"SU1234\"), 1) #> [[1]] #> <BNGReference[8] with Resolution=1km> #> [1] <SU 11 33> <SU 12 33> <SU 13 33> <SU 11 34> <SU 13 34> <SU 11 35> <SU 12 35> #> [8] <SU 13 35> #>   bng_kring(as_bng_reference(\"SU1234\"), 3) #> [[1]] #> <BNGReference[24] with Resolution=1km> #>  [1] <SU 09 31> <SU 10 31> <SU 11 31> <SU 12 31> <SU 13 31> <SU 14 31> #>  [7] <SU 15 31> <SU 09 32> <SU 15 32> <SU 09 33> <SU 15 33> <SU 09 34> #> [13] <SU 15 34> <SU 09 35> <SU 15 35> <SU 09 36> <SU 15 36> <SU 09 37> #> [19] <SU 10 37> <SU 11 37> <SU 12 37> <SU 13 37> <SU 14 37> <SU 15 37> #>   bng_kdisc(as_bng_reference(\"SU1234\"), 1) #> [[1]] #> <BNGReference[9] with Resolution=1km> #> [1] <SU 11 33> <SU 12 33> <SU 13 33> <SU 11 34> <SU 12 34> <SU 13 34> <SU 11 35> #> [8] <SU 12 35> <SU 13 35> #>   bng_kdisc(as_bng_reference(\"SU1234\"), 3) #> [[1]] #> <BNGReference[49] with Resolution=1km> #>  [1] <SU 09 31> <SU 10 31> <SU 11 31> <SU 12 31> <SU 13 31> <SU 14 31> #>  [7] <SU 15 31> <SU 09 32> <SU 10 32> <SU 11 32> <SU 12 32> <SU 13 32> #> [13] <SU 14 32> <SU 15 32> <SU 09 33> <SU 10 33> <SU 11 33> <SU 12 33> #> [19] <SU 13 33> <SU 14 33> <SU 15 33> <SU 09 34> <SU 10 34> <SU 11 34> #> [25] <SU 12 34> <SU 13 34> <SU 14 34> <SU 15 34> <SU 09 35> <SU 10 35> #> [31] <SU 11 35> <SU 12 35> <SU 13 35> <SU 14 35> <SU 15 35> <SU 09 36> #> [37] <SU 10 36> <SU 11 36> <SU 12 36> <SU 13 36> <SU 14 36> <SU 15 36> #> [43] <SU 09 37> <SU 10 37> <SU 11 37> <SU 12 37> <SU 13 37> <SU 14 37> #> [49] <SU 15 37> #>"},{"path":"/reference/bng_neighbours.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify neighbouring grid squares — bng_neighbours","title":"Identify neighbouring grid squares — bng_neighbours","text":"Find BNG references share grid cell edge target BNG reference.","code":""},{"path":"/reference/bng_neighbours.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify neighbouring grid squares — bng_neighbours","text":"","code":"bng_neighbours(bng_ref, ...)  bng_is_neighbour(bng_ref1, bng_ref2, ...)"},{"path":"/reference/bng_neighbours.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify neighbouring grid squares — bng_neighbours","text":"bng_ref target object type BNGReference ... additional parameters. currently used bng_ref1, bng_ref2 BNGReference objects comparison assessing neighbour relationships.","code":""},{"path":"/reference/bng_neighbours.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify neighbouring grid squares — bng_neighbours","text":"list containing set four BNGReference objects border target reference. boolean identifying grid references share border","code":""},{"path":"/reference/bng_neighbours.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Identify neighbouring grid squares — bng_neighbours","text":"Grid references \"neighbours\" share contiguous edge (.e. corners define neighbours). event target reference along edge corner valid BNG area, 3 2 references, respectively, returned bng_is_neighbour compares references equal resolution. bng_ref1 exactly matches bng_ref2 bng_is_neighbour returns FALSE.","code":""},{"path":"/reference/bng_neighbours.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify neighbouring grid squares — bng_neighbours","text":"","code":"bng_neighbours(as_bng_reference(\"SU1234\")) #> [[1]] #> <BNGReference[4] with Resolution=1km> #> [1] <SU 12 33> <SU 11 34> <SU 13 34> <SU 12 35> #>   bng_is_neighbour(as_bng_reference(\"SE1921\"), as_bng_reference(\"SE1821\")) #> [1] TRUE  bng_is_neighbour(as_bng_reference(\"SE1922\"), as_bng_reference(\"SE1821\")) #> [1] FALSE  bng_is_neighbour(as_bng_reference(\"SU1234\"), as_bng_reference(\"SU1234\")) #> [1] FALSE"},{"path":"/reference/bng_to_bbox.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert bounding boxes — bbox_to_bng","title":"Convert bounding boxes — bbox_to_bng","text":"Create British National Grid reference bounding boxes convert grid reference objects bounding boxes.","code":""},{"path":"/reference/bng_to_bbox.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert bounding boxes — bbox_to_bng","text":"","code":"bbox_to_bng(...)  # S3 method for numeric bbox_to_bng(xmin, ymin, xmax, ymax, resolution, ...)  # S3 method for matrix bbox_to_bng(x, resolution, ...)  # S3 method for data.frame bbox_to_bng(x, resolution, ...)  bng_to_bbox(bng_ref, ...)  bng_to_grid_geom(bng_ref, format = c(\"geos\", \"sf\", \"wkt\"), ...)"},{"path":"/reference/bng_to_bbox.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert bounding boxes — bbox_to_bng","text":"... additional parameters, currently used xmin, ymin, xmax, ymax numeric vector bounding box coordinates resolution resolution BNG reference expressed either metre-based integer string label x optional input bounding box matrix data frame values. Either numeric vector object must supplied. bng_ref vector type BNGReference objects format character indicating type geometry object return. Default \"geos\" \"sf\" returns object class sfc.","code":""},{"path":"/reference/bng_to_bbox.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert bounding boxes — bbox_to_bng","text":"bng_to_bbox: numeric vector bounding easting northing coordinates. multiple references supplied bng_ref matrix coordinates returned. bbox_to_bng: list containing vectors BNGReference objects. bng_to_grid_geom converts bounding box coordinates polygon geometry object.","code":""},{"path":"/reference/bng_to_bbox.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert bounding boxes — bbox_to_bng","text":"relationship bounding box returned BNG grid squares depends alignment bounding box BNG index system: bounding box edges align BNG system (e.g. xmin, ymin, xmax, ymax multiples specified resolution), grid squares entirely contained within bounding box returned. Grid squares intersect fully contained within bounding box excluded. bounding box edges aligned BNG system, grid squares partially overlapped bounding box also included. case, function ensures relevant grid squares bounding box touches returned, including edges. Validates normalises bounding box coordinates BNG index system extent. bounding box coordinates fall outside BNG system extent, coordinates snapped bounds BNG system. Bounding boxes expressed four coordinates (min x, min y, max x, max y). Coordinates must British National Grid projection (EPSG:27700). functions support coordinate transformations. matrix input, first four columns used xmin, ymin, xmax, ymax, respectively. data.frame input columns must named \"xmin\", \"ymin\", \"xmax\", \"ymax\" first columns assumed. return BNG grid squares within bounding box geometry, see geom_to_bng().","code":""},{"path":"/reference/bng_to_bbox.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert bounding boxes — bbox_to_bng","text":"","code":"bbox_to_bng(400000, 100000, 500000, 200000, \"50km\") #> [[1]] #> <BNGReference[4] with Resolution=50km> #> [1] <SU SW> <SU SE> <SU NW> <SU NE> #>   bbox_to_bng(285137.06, 78633.75, 299851.01, 86427.96, 5000) #> [[1]] #> <BNGReference[9] with Resolution=5km> #> [1] <SX 8 7 NE> <SX 9 7 NW> <SX 9 7 NE> <SX 8 8 SE> <SX 9 8 SW> <SX 9 8 SE> #> [7] <SX 8 8 NE> <SX 9 8 NW> <SX 9 8 NE> #>   bng_to_bbox(as_bng_reference(\"SU\")) #>       [,1]  [,2]  [,3]  [,4] #> [1,] 4e+05 1e+05 5e+05 2e+05  bng_to_bbox(as_bng_reference(\"SU 3 1\")) #>        [,1]   [,2]   [,3]   [,4] #> [1,] 430000 110000 440000 120000  bng_to_bbox(as_bng_reference(\"SU 3 1 NE\")) #>        [,1]   [,2]   [,3]   [,4] #> [1,] 435000 115000 440000 120000  bng_to_bbox(as_bng_reference(\"SU 37289 15541\")) #>        [,1]   [,2]   [,3]   [,4] #> [1,] 437289 115541 437290 115542  bng_to_grid_geom(as_bng_reference(\"SU\")) #> <geos_geometry[1]> #> [1] <POLYGON ((400000 100000, 500000 100000, 500000 200000, 400000 200000, 400000 100000))>  bng_to_grid_geom(as_bng_reference(\"SU 3 1\")) #> <geos_geometry[1]> #> [1] <POLYGON ((430000 110000, 440000 110000, 440000 120000, 430000 120000, 430000 110000))>  bng_to_grid_geom(as_bng_reference(\"SU 3 1 NE\")) #> <geos_geometry[1]> #> [1] <POLYGON ((435000 115000, 440000 115000, 440000 120000, 435000 120000, 435000 115000))>  bng_to_grid_geom(as_bng_reference(\"SU 37289 15541\")) #> <geos_geometry[1]> #> [1] <POLYGON ((437289 115541, 437290 115541, 437290 115542, 437289 115542, 437289 115541))>"},{"path":"/reference/bng_to_children.html","id":null,"dir":"Reference","previous_headings":"","what":"Navigate the British National Grid hierarchy — bng_to_children","title":"Navigate the British National Grid hierarchy — bng_to_children","text":"Identify \"parent\" \"children\" references contain nested within given BNG reference.","code":""},{"path":"/reference/bng_to_children.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Navigate the British National Grid hierarchy — bng_to_children","text":"","code":"bng_to_children(bng_ref, resolution, ...)  bng_to_parent(bng_ref, resolution, ...)"},{"path":"/reference/bng_to_children.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Navigate the British National Grid hierarchy — bng_to_children","text":"bng_ref object type BNGReference resolution (optional) value target resolution parent/child references. omitted, next resolution relative input BNG reference assumed. ... additional parameters. currently used","code":""},{"path":"/reference/bng_to_children.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Navigate the British National Grid hierarchy — bng_to_children","text":"child references list BNGReference objects item list set children input grid reference. Parent references vector BNGReference objects.","code":""},{"path":"/reference/bng_to_children.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Navigate the British National Grid hierarchy — bng_to_children","text":"BNG structured using hierarchical system grid squares various resolutions. highest level, grid divides GB 100 km 100 km squares, identified two-letter code. Successive levels resolution subdivide grid squares finer detail, individual 1-meter squares. functions allow traversal hierarchy providing methods return parent children BNGReference objects specified resolutions. Definitions: Parent parent BNGReference object grid square next higher (coarser) resolution level contains current reference. example, parent 1km grid square reference 5km grid square contains . Children children BNGReference object grid squares next lower (finer) resolution level contained within current reference. example, children 10km grid square reference 5km grid squares contains.","code":""},{"path":"/reference/bng_to_children.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Navigate the British National Grid hierarchy — bng_to_children","text":"","code":"bng_to_children(as_bng_reference(\"SU\")) #> [[1]] #> <BNGReference[4] with Resolution=50km> #> [1] <SU SW> <SU SE> <SU NW> <SU NE> #>   bng_to_children(as_bng_reference(\"SU36\")) #> [[1]] #> <BNGReference[4] with Resolution=5km> #> [1] <SU 3 6 SW> <SU 3 6 SE> <SU 3 6 NW> <SU 3 6 NE> #>   bng_to_parent(as_bng_reference(\"SU36SW\")) #> <BNGReference[1] with Resolution=10km> #> [1] <SU 3 6>  bng_to_parent(as_bng_reference(\"SU342567\")) #> <BNGReference[1] with Resolution=500m> #> [1] <SU 34 56 NW>  bng_to_parent(as_bng_reference(\"SU342567\"), resolution = 10000) #> <BNGReference[1] with Resolution=10km> #> [1] <SU 3 5>"},{"path":"/reference/bng_to_xy.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert BNG References — bng_to_xy","title":"Convert BNG References — bng_to_xy","text":"Create British National Grid references coordinates specific resolution convert grid reference objects coordinates grid position.","code":""},{"path":"/reference/bng_to_xy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert BNG References — bng_to_xy","text":"","code":"bng_to_xy(   bng_ref,   position = c(\"lower-left\", \"upper-left\", \"upper-right\", \"lower-right\", \"centre\"),   ... )  xy_to_bng(...)  # S3 method for numeric xy_to_bng(easting, northing, resolution, ...)  # S3 method for matrix xy_to_bng(x, resolution, ...)  # S3 method for data.frame xy_to_bng(df, cols = c(\"eastings\", \"northings\"), resolution, ...)"},{"path":"/reference/bng_to_xy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert BNG References — bng_to_xy","text":"bng_ref vector type BNGReference objects position character indicating point location BNG grid square returned. Default lower-left corner. ... additional parameters, currently used easting numeric vector coordinates northing numeric vector coordinates resolution target BNG grid resolution. Can specified numeric character vector x two column matrix eastings northings df data.frame columns coordinates convert cols column names indices within df holding coordinates","code":""},{"path":"/reference/bng_to_xy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert BNG References — bng_to_xy","text":"xy_to_bng: vector BNGReference objects bng_to_xy: two-column matrix eastings northings","code":""},{"path":"/reference/bng_to_xy.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert BNG References — bng_to_xy","text":"Coordinates must British National Grid projection (EPSG:27700) using eastings northings meters. functions support coordinate transformations.","code":""},{"path":"/reference/bng_to_xy.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert BNG References — bng_to_xy","text":"","code":"bng_to_xy(as_bng_reference(\"SU\"), \"lower-left\") #>       [,1]  [,2] #> [1,] 4e+05 1e+05  bng_to_xy(as_bng_reference(\"SU 3 1\"), \"lower-left\") #>        [,1]   [,2] #> [1,] 430000 110000  bng_to_xy(as_bng_reference(\"SU 3 1 NE\"), \"centre\") #>        [,1]   [,2] #> [1,] 437500 117500  bng_to_xy(as_bng_reference(\"SU 37289 15541\"), \"centre\") #>          [,1]     [,2] #> [1,] 437289.5 115541.5  xy_to_bng(437289, 115541, \"100km\") #> <BNGReference[1] with Resolution=100km> #> [1] <SU>  xy_to_bng(437289, 115541, \"10km\") #> <BNGReference[1] with Resolution=10km> #> [1] <SU 3 1>  xy_to_bng(437289, 115541, \"5km\") #> <BNGReference[1] with Resolution=5km> #> [1] <SU 3 1 NE>  xy_to_bng(437289, 115541, 1) #> <BNGReference[1] with Resolution=1m> #> [1] <SU 37289 15541>    # example code  # example code"},{"path":"/reference/geom_to_bng.html","id":null,"dir":"Reference","previous_headings":"","what":"Spatial index for geometries — geom_to_bng","title":"Spatial index for geometries — geom_to_bng","text":"Returns set BNG Reference objects given geometry specified resolution.","code":""},{"path":"/reference/geom_to_bng.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Spatial index for geometries — geom_to_bng","text":"","code":"geom_to_bng(geom, resolution, ...)  # S3 method for geos_geometry geom_to_bng(geom, resolution, ...)  # S3 method for sf geom_to_bng(geom, resolution, ...)  # S3 method for sfc geom_to_bng(geom, resolution, ...)  geom_to_bng_intersection(   geom,   resolution,   format = c(\"geos\", \"sf\", \"wkt\"),   ... )  # S3 method for geos_geometry geom_to_bng_intersection(   geom,   resolution,   format = c(\"geos\", \"sf\", \"wkt\"),   ... )  # S3 method for sf geom_to_bng_intersection(   geom,   resolution,   format = c(\"geos\", \"sf\", \"wkt\"),   ... )  # S3 method for sfc geom_to_bng_intersection(   geom,   resolution,   format = c(\"geos\", \"sf\", \"wkt\"),   ... )"},{"path":"/reference/geom_to_bng.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Spatial index for geometries — geom_to_bng","text":"geom geometry object type geos-geometry sf resolution spatial resolution BNG cell expressed string integer values ... additional parameters. currently used. format character indicating type geometry object return. Default \"geos\" \"sf\" returns geometry object class sfc.","code":""},{"path":"/reference/geom_to_bng.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Spatial index for geometries — geom_to_bng","text":"geom_to_bng: list vectors BNGReference objects number items list equal length(geom). geom_to_bng_intersection: list nested lists length(geom). nested list contains three named items: \"BNGReference\" - BNGReference objects representing grid squares corresponding decomposition. \"is_core\" - logical vector indicating whether grid square geometry entirely contained input geometry. relevant Polygon geometries helps distinguish \"core\" (fully inside) \"edge\" (partially overlapping) grid squares. \"geom\" - geometry representing intersection input geometry grid square. can one number geometry types depending overlap. \"is_core\" TRUE, \"geom\" grid square geometry.","code":""},{"path":"/reference/geom_to_bng.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Spatial index for geometries — geom_to_bng","text":"BNG Reference objects returned represent grid squares intersected input geometry. BNG Reference objects de-duplicated cases two parts multi-part geometry intersect grid square. Unlike geom_to_bng returns BNG Reference objects representing grid squares intersected input geometry, geom_to_bng_intersection returns list objects store intersection input geometry grid square geometries. functions useful spatial indexing aggregation geometries BNG. geometry decomposition BNG index system, use geom_to_bng_intersection instead.","code":""},{"path":[]},{"path":"/reference/geom_to_bng.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Spatial index for geometries — geom_to_bng","text":"","code":"geom_to_bng(geos::geos_make_point(430000, 110000), \"100km\") #> <BNGReference[1] with Resolution=100km> #> [1] <SU>  geom_to_bng(geos::geos_make_linestring(c(430000, 430010, 430010), c(110000, 110000, 110010)), \"5m\") #> [[1]] #> <BNGReference[3] with Resolution=5m> #> [1] <SU 3000 1000 SW> <SU 3000 1000 SE> <SU 3000 1000 NE> #>   geom_to_bng_intersection(geos::geos_make_point(430000, 110000), \"100km\") #> [[1]] #> [[1]]$BNGReference #> <BNGReference[1] with Resolution=100km> #> [1] <SU> #>  #> [[1]]$is_core #> [1] FALSE #>  #> [[1]]$geom #> <geos_geometry[1]> #> [1] <POINT (430000 110000)> #>  #>   geom_to_bng_intersection(geos::geos_make_linestring(c(430000, 430010, 430010), c(110000, 110000, 110010)), \"5m\") #> [[1]] #> [[1]]$BNGReference #> <BNGReference[3] with Resolution=5m> #> [1] <SU 3000 1000 SW> <SU 3000 1000 SE> <SU 3000 1000 NE> #>  #> [[1]]$is_core #> [1] FALSE FALSE FALSE #>  #> [[1]]$geom #> <geos_geometry[3]> #> [1] <LINESTRING (430000 110000, 430005 110000)>                                        #> [2] <MULTILINESTRING ((430005 110000, 430010 110000), (430010 110000, 430010 110005))> #> [3] <LINESTRING (430010 110005, 430010 110010)>                                        #>  #>   geom_to_bng_intersection(geos::geos_make_polygon(c(375480.64511692, 426949.67604058, 465166.20199588, 453762.88376729, 393510.2158297, 375480.64511692), c(144999.23691181, 160255.02751493, 153320.57724078, 94454.79935802, 91989.21703833, 144999.23691181)), \"50km\") #> [[1]] #> [[1]]$BNGReference #> <BNGReference[9] with Resolution=50km> #> [1] <SY NE> <SZ NW> <SZ NE> <ST SE> <SU SW> <SU SE> <ST NE> <SU NW> <SU NE> #>  #> [[1]]$is_core #> [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE #>  #> [[1]]$geom #> <geos_geometry[9]> #> [1] <POLYGON ((393510.21583 91989.21704, 390785.61814 100000, 400000 100000, 400000 92254.78365, 393510.21583 91989.21704))> #> [2] <POLYGON ((400000 92254.78365, 400000 100000, 450000 100000, 450000 94300.81946, 400000 92254.78365))>                   #> [3] <POLYGON ((453762.88377 94454.79936, 450000 94300.81946, 450000 100000, 454837.08494 100000, 453762.88377 94454.79936))> #> [4] <POLYGON [375481 100000...400000 150000]>                                                                                #> [5] <POLYGON ((400000 100000, 450000 100000, 450000 150000, 400000 150000, 400000 100000))>                                  #> [6] <POLYGON ((454837.08494 100000, 450000 100000, 450000 150000, 464522.94881 150000, 454837.08494 100000))>                #> [7] <POLYGON ((400000 152266.94989, 400000 150000, 392351.90644 150000, 400000 152266.94989))>                               #> [8] <POLYGON [400000 150000...450000 160255]>                                                                                #> [9] <POLYGON ((465166.202 153320.57724, 464522.94881 150000, 450000 150000, 450000 156072.50905, 465166.202 153320.57724))>  #>  #>"},{"path":"/reference/geom_to_bng_intersection_explode.html","id":null,"dir":"Reference","previous_headings":"","what":"Spatial data frame for indexed geometries — geom_to_bng_intersection_explode","title":"Spatial data frame for indexed geometries — geom_to_bng_intersection_explode","text":"Generate set BNG Reference objects given geometry specified resolution provide results spatial data frame format.","code":""},{"path":"/reference/geom_to_bng_intersection_explode.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Spatial data frame for indexed geometries — geom_to_bng_intersection_explode","text":"","code":"geom_to_bng_intersection_explode(geom, resolution, reset_index = TRUE, ...)  # S3 method for geos_geometry geom_to_bng_intersection_explode(geom, resolution, reset_index = TRUE, ...)  # S3 method for sf geom_to_bng_intersection_explode(geom, resolution, reset_index = TRUE, ...)  # S3 method for sfc geom_to_bng_intersection_explode(geom, resolution, reset_index = TRUE, ...)"},{"path":"/reference/geom_to_bng_intersection_explode.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Spatial data frame for indexed geometries — geom_to_bng_intersection_explode","text":"geom geometry object type geos-geometry sf resolution spatial resolution BNG cell expressed string integer values reset_index logical. row names reset output? Default TRUE renumber output rows sequentially. ... additional parameters. currently used.","code":""},{"path":"/reference/geom_to_bng_intersection_explode.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Spatial data frame for indexed geometries — geom_to_bng_intersection_explode","text":"spatial data frame type sf coordinate reference system British National Grid (EPSG:27700). non-geometry columns input () joined three columns BNGReference object, is_core property, indexed geometry.","code":""},{"path":"/reference/geom_to_bng_intersection_explode.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Spatial data frame for indexed geometries — geom_to_bng_intersection_explode","text":"BNG Reference objects returned represent grid squares intersected input geometry. function followings pattern geom_to_bng_intersection(), flattens list structure results spatial data frame. original geometry dropped process columns retained output. sf package required use functionality.","code":""},{"path":[]},{"path":"/reference/geom_to_bng_intersection_explode.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Spatial data frame for indexed geometries — geom_to_bng_intersection_explode","text":"","code":"geom_to_bng_intersection_explode(geos::geos_make_polygon(c(375480.64511692,  426949.67604058, 465166.20199588, 453762.88376729, 393510.2158297,  375480.64511692), c(144999.23691181, 160255.02751493, 153320.57724078,  94454.79935802, 91989.21703833, 144999.23691181)), \"50km\") #> Simple feature collection with 9 features and 2 fields #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 375480.6 ymin: 91989.22 xmax: 465166.2 ymax: 160255 #> Projected CRS: OSGB 1936 / British National Grid #>   bng_reference is_core                       geometry #> 1       <SY NE>   FALSE POLYGON ((393510.2 91989.22... #> 2       <SZ NW>   FALSE POLYGON ((4e+05 92254.78, 4... #> 3       <SZ NE>   FALSE POLYGON ((453762.9 94454.8,... #> 4       <ST SE>   FALSE POLYGON ((392351.9 150000, ... #> 5       <SU SW>    TRUE POLYGON ((4e+05 1e+05, 4500... #> 6       <SU SE>   FALSE POLYGON ((454837.1 1e+05, 4... #> 7       <ST NE>   FALSE POLYGON ((4e+05 152266.9, 4... #> 8       <SU NW>   FALSE POLYGON ((426949.7 160255, ... #> 9       <SU NE>   FALSE POLYGON ((465166.2 153320.6..."},{"path":"/reference/get_bng_resolution.html","id":null,"dir":"Reference","previous_headings":"","what":"BNG reference resolution — get_bng_resolution","title":"BNG reference resolution — get_bng_resolution","text":"Find spatial resolution (.e. grid size) British National Grid square, list valid resolutions.","code":""},{"path":"/reference/get_bng_resolution.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"BNG reference resolution — get_bng_resolution","text":"","code":"get_bng_resolution(bng_ref)  get_bng_resolution_string(bng_ref)  list_bng_resolution(which = c(\"all\", \"whole\", \"quad\"), lbl = FALSE)"},{"path":"/reference/get_bng_resolution.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"BNG reference resolution — get_bng_resolution","text":"bng_ref Vector BNGReference objects test. character indicating set resolutions return. lbl logical. resolutions labels returned? Default FALSE return numeric resolutions.","code":""},{"path":"/reference/get_bng_resolution.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"BNG reference resolution — get_bng_resolution","text":"vector numeric values get_bng_resolution() metres character strings expressing resolution grid references. vector BNG resolutions either numeric values character labels.","code":""},{"path":"/reference/get_bng_resolution.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"BNG reference resolution — get_bng_resolution","text":"integer values represent spatial resolutions metres, string labels provide human-readable descriptor resolution level. example, numeric resolution 1000 mapped label '1km'.","code":""},{"path":"/reference/get_bng_resolution.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"BNG reference resolution — get_bng_resolution","text":"","code":"get_bng_resolution(as_bng_reference(\"TQ1234\")) #> [1] 1000  get_bng_resolution_string(as_bng_reference(\"TQ1234NE\")) #> [1] \"500m\"  list_bng_resolution(which = \"all\", lbl = TRUE) #>  [1] \"100km\" \"50km\"  \"10km\"  \"5km\"   \"1km\"   \"500m\"  \"100m\"  \"50m\"   \"10m\"   #> [10] \"5m\"    \"1m\""},{"path":"/reference/list_bng.html","id":null,"dir":"Reference","previous_headings":"","what":"List the components of the British National Grid — list_bng","title":"List the components of the British National Grid — list_bng","text":"Helper functions provide access bounds set 100km grid reference identifiers.","code":""},{"path":"/reference/list_bng.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List the components of the British National Grid — list_bng","text":"","code":"list_bng_prefixes(arranged = FALSE)  list_bng_bounds(named = TRUE)"},{"path":"/reference/list_bng.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List the components of the British National Grid — list_bng","text":"arranged logical. grid reference letters arranged 2D matrix? Default FALSE. named logical. bounding box vector include names (e.g. 'xmin')? Default TRUE.","code":""},{"path":"/reference/list_bng.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List the components of the British National Grid — list_bng","text":"character vector 2-letter identifiers valid 100km grid squares. arranged TRUE vector coerced 2D matrix. numeric vector four values xmin, ymin, xmax, ymax coordinates valid extant British National Grid.","code":""},{"path":"/reference/list_bng.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"List the components of the British National Grid — list_bng","text":"arranged TRUE, matrix arrangement matches British National Grid, note orientation. first element \"SV\" mapped southwest corner.","code":""},{"path":"/reference/list_bng.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List the components of the British National Grid — list_bng","text":"","code":"list_bng_prefixes() #>  [1] \"SV\" \"SW\" \"SX\" \"SY\" \"SZ\" \"TV\" \"TW\" \"SQ\" \"SR\" \"SS\" \"ST\" \"SU\" \"TQ\" \"TR\" \"SL\" #> [16] \"SM\" \"SN\" \"SO\" \"SP\" \"TL\" \"TM\" \"SF\" \"SG\" \"SH\" \"SJ\" \"SK\" \"TF\" \"TG\" \"SA\" \"SB\" #> [31] \"SC\" \"SD\" \"SE\" \"TA\" \"TB\" \"NV\" \"NW\" \"NX\" \"NY\" \"NZ\" \"OV\" \"OW\" \"NQ\" \"NR\" \"NS\" #> [46] \"NT\" \"NU\" \"OQ\" \"OR\" \"NL\" \"NM\" \"NN\" \"NO\" \"NP\" \"OL\" \"OM\" \"NF\" \"NG\" \"NH\" \"NJ\" #> [61] \"NK\" \"OF\" \"OG\" \"NA\" \"NB\" \"NC\" \"ND\" \"NE\" \"OA\" \"OB\" \"HV\" \"HW\" \"HX\" \"HY\" \"HZ\" #> [76] \"JV\" \"JW\" \"HQ\" \"HR\" \"HS\" \"HT\" \"HU\" \"JQ\" \"JR\" \"HL\" \"HM\" \"HN\" \"HO\" \"HP\" \"JL\" #> [91] \"JM\"  list_bng_prefixes(arranged = TRUE) #>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] #>  [1,] \"SV\" \"SW\" \"SX\" \"SY\" \"SZ\" \"TV\" \"TW\" #>  [2,] \"SQ\" \"SR\" \"SS\" \"ST\" \"SU\" \"TQ\" \"TR\" #>  [3,] \"SL\" \"SM\" \"SN\" \"SO\" \"SP\" \"TL\" \"TM\" #>  [4,] \"SF\" \"SG\" \"SH\" \"SJ\" \"SK\" \"TF\" \"TG\" #>  [5,] \"SA\" \"SB\" \"SC\" \"SD\" \"SE\" \"TA\" \"TB\" #>  [6,] \"NV\" \"NW\" \"NX\" \"NY\" \"NZ\" \"OV\" \"OW\" #>  [7,] \"NQ\" \"NR\" \"NS\" \"NT\" \"NU\" \"OQ\" \"OR\" #>  [8,] \"NL\" \"NM\" \"NN\" \"NO\" \"NP\" \"OL\" \"OM\" #>  [9,] \"NF\" \"NG\" \"NH\" \"NJ\" \"NK\" \"OF\" \"OG\" #> [10,] \"NA\" \"NB\" \"NC\" \"ND\" \"NE\" \"OA\" \"OB\" #> [11,] \"HV\" \"HW\" \"HX\" \"HY\" \"HZ\" \"JV\" \"JW\" #> [12,] \"HQ\" \"HR\" \"HS\" \"HT\" \"HU\" \"JQ\" \"JR\" #> [13,] \"HL\" \"HM\" \"HN\" \"HO\" \"HP\" \"JL\" \"JM\"  list_bng_bounds() #>    xmin    ymin    xmax    ymax  #>       0       0  700000 1300000"},{"path":"/reference/osbng-package.html","id":null,"dir":"Reference","previous_headings":"","what":"osbng: Access the British National Grid (BNG) index system — osbng-package","title":"osbng: Access the British National Grid (BNG) index system — osbng-package","text":"osbng provides programmatic interface Ordnance Survey's British National Grid (BNG) index system, supporting efficient grid-based spatial indexing analysis. enables applications statistical aggregation, data visualisation, data interoperability using BNG grid references. Designed developers working geospatial data context Great Britain, library offers tools simplify working BNG, facilitating technical integration geospatial workflows practical exploration index system's structure.","code":""},{"path":[]},{"path":"/reference/osbng-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"osbng: Access the British National Grid (BNG) index system — osbng-package","text":"Maintainer: Chris Jochem chris.jochem@os.uk contributors: Ordnance Survey Ltd [copyright holder, funder] Steve Kingston [contributor] Kate New [contributor] Tom Peterken [contributor]","code":""},{"path":"/reference/print.BNGReference.html","id":null,"dir":"Reference","previous_headings":"","what":"Printing BNG References — print.BNGReference","title":"Printing BNG References — print.BNGReference","text":"Supporting formatting printing BNGReference objects.","code":""},{"path":"/reference/print.BNGReference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Printing BNG References — print.BNGReference","text":"","code":"# S3 method for BNGReference print(x, ...)  # S3 method for BNGReference format(x, compact = FALSE, ...)"},{"path":"/reference/print.BNGReference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Printing BNG References — print.BNGReference","text":"x object type BNGReference. ... Additional parameters. compact Logical. standard spaces added removed \"pretty\" printing? Default FALSE add spaces.","code":""},{"path":"/reference/print.BNGReference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Printing BNG References — print.BNGReference","text":"format provides standard formatting BNG reference objects print outputs BNG references invisibly returns object.","code":""},{"path":"/reference/print.BNGReference.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Printing BNG References — print.BNGReference","text":"Standard spaces added: 1) two-letter prefix, 2) eastings northings, 3) quadrant suffix, components exist grid reference.","code":""},{"path":"/reference/print.BNGReference.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Printing BNG References — print.BNGReference","text":"","code":"x <- as_bng_reference(\"SU1234\") print(x) #> <BNGReference[1] with Resolution=1km> #> [1] <SU 12 34>  print(x, compact = TRUE) #> <BNGReference[1] with Resolution=1km> #> [1] <SU1234>"},{"path":"/reference/valid.html","id":null,"dir":"Reference","previous_headings":"","what":"Check validity of a BNG Reference — valid","title":"Check validity of a BNG Reference — valid","text":"Validates British National Grid reference string using regular expression pattern. Helper function used verify resolutions.","code":""},{"path":"/reference/valid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check validity of a BNG Reference — valid","text":"","code":"is_valid_bng(bng_ref)  # S3 method for character is_valid_bng(bng_ref)  # S3 method for BNGReference is_valid_bng(bng_ref)  is_valid_bng_resolution(resolution)"},{"path":"/reference/valid.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check validity of a BNG Reference — valid","text":"bng_ref Input vector BNG reference string(s) validate. resolution Numeric character vector resolutions test.","code":""},{"path":"/reference/valid.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check validity of a BNG Reference — valid","text":"Logical vector indicating reference bng_ref whether valid. Logical vector testing resolution.","code":""},{"path":"/reference/valid.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Check validity of a BNG Reference — valid","text":"BNG structured using hierarchical system grid squares various resolutions. highest level, grid divided 100 km 100 km squares, identified two-letter code. Successive levels resolution subdivide grid squares finer detail, individual 1-meter squares. reference consists 2-letter prefix (identifying 100 km grid square), followed easting northing value, may subdivided using intermediate resolutions. Additionally, optional suffix representing ordinal (intercardinal) directions (NE, SE, SW, NW) may appended reference account quadtree subdivision grid finer resolutions. grid reference can expressed different scales, follows: 100 km: Identified two-letter code (e.g. 'TQ'). 50 km: Subdivides 100 km grid four quadrants. grid reference adds ordinal direction suffix (NE, NW, SE, SW) indicate quadrant within 100 km square (e.g. 'TQSW'). 10 km: Adds two-digit easting northing values (e.g. 'TQ23'). 5 km: Subdivides 10 km square adding ordinal suffix (e.g. 'TQ53SW'). 1 km: Adds four-digit easting northing values (e.g. 'TQ2334'). 500 m: Subdivides 1 km square adding ordinal suffix (e.g. 'TQ2334NE'). 100 m: Adds six-digit easting northing values (e.g. ' TQ238347'). 50 m: Subdivides 100 m square adding ordinal suffix (e.g. 'TQ238347SE'). 10 m: Adds eight-digit easting northing values (e.g. 'TQ23863472'). 5 m: Subdivides 10 m square adding ordinal suffix (e.g. e.g. 'TQ23863472NW'). 1 m: Adds ten-digit easting northing values (e.g. 'TQ2386334729'). BNG references must adhere following format: Whitespace may may separate  components reference (.e. two-letter 100km grid square prefix, easting, northing, ordinal suffix). whitespace present, single space character. Whitespace can inconsistently used components reference. two-letter 100 km grid square prefixes ordinal direction suffixes (NE, SE, SW, NW) capitalised. resolution, given location can identified increasing detail, allowing variable accuracy depending geospatial application, small-scale mapping precise survey measurements.","code":""},{"path":[]},{"path":"/reference/valid.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check validity of a BNG Reference — valid","text":"","code":"is_valid_bng(\"TQ1234\")  # TRUE #> [1] TRUE  is_valid_bng(\"TQ123\")  # FALSE #> [1] FALSE  is_valid_bng(\"TQ 12 34\")  # TRUE #> [1] TRUE  is_valid_bng_resolution(1000) #> [1] TRUE  is_valid_bng_resolution(\"1km\") #> [1] TRUE  is_valid_bng_resolution(0.5) #> [1] FALSE"},{"path":"/news/index.html","id":"osbng-020","dir":"Changelog","previous_headings":"","what":"osbng 0.2.0","title":"osbng 0.2.0","text":"New geom_to_bng_intersection_explode() simplifies exploding flattening features create spatial data frame. sf package required functionality. New bng_grid_<resolution>() family added create spatial data frames BNGReference features. sf package required functionality. New vignette overview basic BNG interaction added. Updated vignette indexing examples includes geom_to_bng_intersection_explode(). bbox_to_bng() now optionally accepts data.frame input named columns. geom_to_bng() geom_to_bng_intersection() accept sfc objects inputs. Updated website package description. Adds Citation File Format (CFF) file.","code":""},{"path":"/news/index.html","id":"osbng-010","dir":"Changelog","previous_headings":"","what":"osbng 0.1.0","title":"osbng 0.1.0","text":"Initial release osbng establishing custom BNGRference-type objects support conversion, indexing, traversal. Establish MIT license. Website vignettes set .","code":""}]
