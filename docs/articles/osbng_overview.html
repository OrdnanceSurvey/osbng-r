<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="osbng">
<title>osbng Overview • osbng</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Hanken_Grotesk-0.4.8/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="osbng Overview">
<meta property="og:description" content="osbng">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">osbng</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/osbng_overview.html">osbng Overview</a>
    <a class="dropdown-item" href="../articles/osbng_indexing_polygon_examples.html">Indexing Polygon Example</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/OrdnanceSurvey/osbng-r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>osbng Overview</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/OrdnanceSurvey/osbng-r/blob/HEAD/vignettes/osbng_overview.Rmd" class="external-link"><code>vignettes/osbng_overview.Rmd</code></a></small>
      <div class="d-none name"><code>osbng_overview.Rmd</code></div>
    </div>

    
    
<p>The <code>osbng</code> R package support geospatial grid indexing and
interaction with Ordnance Survey’s British National Grid (BNG) index
system. <code>osbng</code> uses <a href="https://paleolimbot.github.io/geos/" class="external-link"><code>geos</code></a> for
geospatial operations, with <a href="https://r-spatial.github.io/sf/" class="external-link"><code>sf</code></a> an optional
dependency. The <code>osbng</code> package provides functionality
supporting different interactions with the BNG index system
(e.g. indexing, hierarchy, traversal). This notebook provides an
overview of the package functionality, including example usage.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ordnancesurvey.github.io/osbng-r/" class="external-link">osbng</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.9.1, GDAL 3.3.2, PROJ 7.2.1; sf_use_s2() is TRUE</span></span></code></pre></div>
<div class="section level2">
<h2 id="bng-index-system">BNG Index System<a class="anchor" aria-label="anchor" href="#bng-index-system"></a>
</h2>
<p>The OS BNG index system, also known as the OS National Grid, is a
rectangular Cartesian 700 x 1300km grid system based upon the transverse
Mercator projection. In the BNG, locations are specified using
coordinates, eastings (x) and northings (y), measured in meters from a
defined origin point (0, 0) southwest of the Isles of Scilly off the
coast of Cornwall, England. Values increase to the northeast, covering
all of mainland GB and surrounding islands.</p>
<p>The BNG is structured using a hierarchical system of grid squares at
various resolutions. At its highest level, the grid divides GB into 100
km by 100 km squares, each identified bya two-letter code. Successive
levels of resolution further subdivide the grid squares into finder
detail, down to individual 1-meter squares.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list_bng.html">list_bng_bounds</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;    xmin    ymin    xmax    ymax </span></span>
<span><span class="co">#&gt;       0       0  700000 1300000</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list_bng.html">list_bng_prefixes</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "SV" "SW" "SX" "SY" "SZ" "TV" "TW" "SQ" "SR" "SS" "ST" "SU" "TQ" "TR" "SL"</span></span>
<span><span class="co">#&gt; [16] "SM" "SN" "SO" "SP" "TL" "TM" "SF" "SG" "SH" "SJ" "SK" "TF" "TG" "SA" "SB"</span></span>
<span><span class="co">#&gt; [31] "SC" "SD" "SE" "TA" "TB" "NV" "NW" "NX" "NY" "NZ" "OV" "OW" "NQ" "NR" "NS"</span></span>
<span><span class="co">#&gt; [46] "NT" "NU" "OQ" "OR" "NL" "NM" "NN" "NO" "NP" "OL" "OM" "NF" "NG" "NH" "NJ"</span></span>
<span><span class="co">#&gt; [61] "NK" "OF" "OG" "NA" "NB" "NC" "ND" "NE" "OA" "OB" "HV" "HW" "HX" "HY" "HZ"</span></span>
<span><span class="co">#&gt; [76] "JV" "JW" "HQ" "HR" "HS" "HT" "HU" "JQ" "JR" "HL" "HM" "HN" "HO" "HP" "JL"</span></span>
<span><span class="co">#&gt; [91] "JM"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="resolutions">Resolutions<a class="anchor" aria-label="anchor" href="#resolutions"></a>
</h2>
<p><code>osbng</code> supports the “standard” BNG meter-based
resolutions, which represent powers of ten from 1m to 100km
<code>(1m, 10m, 100m, 1km, 10km, 100km)</code>. It also supports the
“intermediate” quadtree resolutions
<code>(5m, 50m, 500m, 5km, 50km)</code>, identified by an ordinal
<code>(NE, SE, WS, NW)</code> BNG reference direction suffix. The
<code>resolution</code> argument for functions can be expressed as a
meter-based integer or as a label.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_bng_resolution.html">list_bng_resolution</a></span><span class="op">(</span>lbl <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "100km" "50km"  "10km"  "5km"   "1km"   "500m"  "100m"  "50m"   "10m"  </span></span>
<span><span class="co">#&gt; [10] "5m"    "1m"</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_bng_resolution.html">list_bng_resolution</a></span><span class="op">(</span>lbl <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 1e+05 5e+04 1e+04 5e+03 1e+03 5e+02 1e+02 5e+01 1e+01 5e+00 1e+00</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="bngreference">
<code>BNGReference</code><a class="anchor" aria-label="anchor" href="#bngreference"></a>
</h2>
<p>The BNG index system uses BNG references, also known more simply as
grid or tile references, to identify and index locations across Great
Britain (GB) into grid squares at various resolutions. The
<code>osbng</code> package implements a custom <code>BNGReference</code>
object. This object validates and encapsulates a BNG reference,
providing functions to access and manipulate the reference. All
functions accepting or returning BNG references enforce the use of this
class. Functions within <code>osbng</code> are vectorised and compatible
with pipes (<code>%&gt;%</code>, <code>|&gt;</code>) for efficient
processing of multiple BNG references.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert a BNG reference string into a `BNGReference` object</span></span>
<span><span class="va">bng_ref</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU 372 155"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bng_ref</span></span>
<span><span class="co">#&gt; &lt;BNGReference[1] with Resolution=100m&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;SU 372 155&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The BNG reference string as a compact string</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">bng_ref</span>, compact <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;BNGReference[1] with Resolution=100m&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;SU372155&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The BNG reference string as a formatted string (default behaviour)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">bng_ref</span>, compact <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;BNGReference[1] with Resolution=100m&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;SU 372 155&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The BNG resolution expressed in metres</span></span>
<span><span class="fu"><a href="../reference/get_bng_resolution.html">get_bng_resolution</a></span><span class="op">(</span><span class="va">bng_ref</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 100</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The BNG resolution expressed as a descriptive label</span></span>
<span><span class="fu"><a href="../reference/get_bng_resolution.html">get_bng_resolution_string</a></span><span class="op">(</span><span class="va">bng_ref</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "100m"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="indexing">Indexing<a class="anchor" aria-label="anchor" href="#indexing"></a>
</h2>
<p>A core component of <code>osbng</code> is the ability to index and
work with coordinates and geometries against the BNG index system. This
includes:</p>
<ul>
<li>Encoding easting and northing coordinates into
<code>BNGReference</code> objects at a specified resolution.</li>
<li>Decoding <code>BNGReference</code> objects back into coordiantes,
bounding boxes, and grid squares as <code>geos</code> geometries.</li>
<li>Indexing boudning boxes and <code>geos</code> geometries into grid
squares at a specified resolution for spatial analysis.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Easting and northing coordinates</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">437293</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">115543</span></span>
<span></span>
<span><span class="co"># Convert easting and northing to BNGReference at 1km resolution</span></span>
<span><span class="va">bng_ref</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_to_xy.html">xy_to_bng</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, resolution <span class="op">=</span> <span class="st">"1km"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bng_ref</span></span>
<span><span class="co">#&gt; &lt;BNGReference[1] with Resolution=1km&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;SU 37 15&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Decode BNGReference back into coordinates</span></span>
<span><span class="co"># Default "position" is "lower-left"</span></span>
<span><span class="fu"><a href="../reference/bng_to_xy.html">bng_to_xy</a></span><span class="op">(</span><span class="va">bng_ref</span><span class="op">)</span></span>
<span><span class="co">#&gt;        [,1]   [,2]</span></span>
<span><span class="co">#&gt; [1,] 437000 115000</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Decode BNGRefernece back into coordinates</span></span>
<span><span class="co"># Centroid of the grid square</span></span>
<span><span class="co"># "position" can be one of "lower-left", "upper-left", "lower-right", "upper-right", "centre"</span></span>
<span><span class="fu"><a href="../reference/bng_to_xy.html">bng_to_xy</a></span><span class="op">(</span><span class="va">bng_ref</span>, position <span class="op">=</span> <span class="st">"centre"</span><span class="op">)</span></span>
<span><span class="co">#&gt;        [,1]   [,2]</span></span>
<span><span class="co">#&gt; [1,] 437500 115500</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return the grid square bounding box coordinates for the BNGRference object</span></span>
<span><span class="fu"><a href="../reference/bng_to_bbox.html">bng_to_bbox</a></span><span class="op">(</span><span class="va">bng_ref</span><span class="op">)</span></span>
<span><span class="co">#&gt;        [,1]   [,2]   [,3]   [,4]</span></span>
<span><span class="co">#&gt; [1,] 437000 115000 438000 116000</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return the grid square as a geos geometry object for the BNGReference object</span></span>
<span><span class="co"># Alternatively return the geometry as WKT or `sf` object</span></span>
<span><span class="fu"><a href="../reference/bng_to_bbox.html">bng_to_grid_geom</a></span><span class="op">(</span><span class="va">bng_ref</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;geos_geometry[1]&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;POLYGON ((437000 115000, 438000 115000, 438000 116000, 437000 116000, 437000 115000))&gt;</span></span></code></pre></div>
<div class="section level3">
<h3 id="indexing-geos-geometries">Indexing <code>geos</code> Geometries<a class="anchor" aria-label="anchor" href="#indexing-geos-geometries"></a>
</h3>
<p>The <code>geom_to_bng</code> and
<code>geom_to_bng_intersection</code> functions enable the indexing of
geometries, represented using <code>geos</code> Geometry objects, into
grid squares at a specified resolution. Both functions accept
<code>geos</code> Geometry objects of the following types:
<code>Point</code>, <code>LineString</code>, <code>Polygon</code>,
<code>MultiPoint</code>, <code>MultiLineString</code>,
<code>MultiPolygon</code>, and <code>GeometryCollection</code>. The
coordinates must be encoded in the <a href="https://epsg.io/27700" class="external-link">British National Grid (OSGB36)
EPSG:27700</a> coordinate reference system.</p>
<p>These functions facilitate grid-based spatial analysis, enabling
applications such as statistical aggregation, data visualisation, and
data interoperability. The two functions differ in their operation:</p>
<ul>
<li>
<code>geom_to_bng</code> returns the BNG grid squares intersected by
the input geometry.</li>
<li>
<code>geom_to_bng_intersection</code> returns the intersections
(shared geometries) between the input geometry and the grid square
geometries.</li>
</ul>
<p>See the vignette indexing for more examples and etail on the
operation of the two functions.</p>
<div class="section level4">
<h4 id="point">Point<a class="anchor" aria-label="anchor" href="#point"></a>
</h4>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Easting and northing coordinates</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">437293</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">115543</span></span>
<span></span>
<span><span class="co"># Construct a geos Point geometry from easting and northing coordinates</span></span>
<span><span class="va">geom</span> <span class="op">&lt;-</span> <span class="fu">geos</span><span class="fu">::</span><span class="fu"><a href="https://paleolimbot.github.io/geos/reference/geos_make_point.html" class="external-link">geos_make_point</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Return the BNGReference object for the geometry at a 5km resolution</span></span>
<span><span class="fu"><a href="../reference/geom_to_bng.html">geom_to_bng</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="va">geom</span>, resolution <span class="op">=</span> <span class="st">"5km"</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;BNGReference[1] with Resolution=5km&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;SU 3 1 NE&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return the indexed results for the geometry at a 5km resolution</span></span>
<span><span class="co"># For a Point geometry, the intersection geometry is the same as the original geometry</span></span>
<span><span class="co"># The is_core property will always be False for a Point geometry</span></span>
<span><span class="fu"><a href="../reference/geom_to_bng.html">geom_to_bng_intersection</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="va">geom</span>, resolution <span class="op">=</span> <span class="st">"5km"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]]$BNGReference</span></span>
<span><span class="co">#&gt; &lt;BNGReference[1] with Resolution=5km&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;SU 3 1 NE&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$is_core</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$geom</span></span>
<span><span class="co">#&gt; &lt;geos_geometry[1]&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;POINT (437293 115543)&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="linestring">LineString<a class="anchor" aria-label="anchor" href="#linestring"></a>
</h4>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a geos LineString geometry from Well Known Text (WKT)</span></span>
<span><span class="va">geom</span> <span class="op">&lt;-</span> <span class="fu">geos</span><span class="fu">::</span><span class="fu"><a href="https://paleolimbot.github.io/geos/reference/geos_read_wkt.html" class="external-link">geos_read_wkt</a></span><span class="op">(</span><span class="st">"LINESTRING (436171.8 114893.7, 437861.3 116130.0)"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Return a list of the BNGReference object(s) intersected by the geometry at a 1km resolution</span></span>
<span><span class="fu"><a href="../reference/geom_to_bng.html">geom_to_bng</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="va">geom</span>, resolution <span class="op">=</span> <span class="st">"1km"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; &lt;BNGReference[4] with Resolution=1km&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;SU 36 14&gt; &lt;SU 36 15&gt; &lt;SU 37 15&gt; &lt;SU 37 16&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return a nested list of the indexing results for the geometry at a 1km resolution</span></span>
<span><span class="co"># The is_core property will always be False for a LineString geometry</span></span>
<span><span class="fu"><a href="../reference/geom_to_bng.html">geom_to_bng_intersection</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="va">geom</span>, resolution <span class="op">=</span> <span class="st">"1km"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]]$BNGReference</span></span>
<span><span class="co">#&gt; &lt;BNGReference[4] with Resolution=1km&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;SU 36 14&gt; &lt;SU 36 15&gt; &lt;SU 37 15&gt; &lt;SU 37 16&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$is_core</span></span>
<span><span class="co">#&gt; [1] FALSE FALSE FALSE FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$geom</span></span>
<span><span class="co">#&gt; &lt;geos_geometry[4]&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;LINESTRING (436171.8 114893.7, 436317.06721 115000)&gt;  </span></span>
<span><span class="co">#&gt; [2] &lt;LINESTRING (436317.06721 115000, 437000 115499.73946)&gt;</span></span>
<span><span class="co">#&gt; [3] &lt;LINESTRING (437000 115499.73946, 437683.6449 116000)&gt; </span></span>
<span><span class="co">#&gt; [4] &lt;LINESTRING (437683.6449 116000, 437861.3 116130)&gt;</span></span></code></pre></div>
<div class="section level5">
<h5 id="visualise-the-results">Visualise the results<a class="anchor" aria-label="anchor" href="#visualise-the-results"></a>
</h5>
<p>For this example of visualising the results, we will use the
<code>sf</code> library for spatial data handling, which is a suggested
package that works well with <code>osbng</code>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return the indexed results</span></span>
<span><span class="va">bng_idx_geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/geom_to_bng.html">geom_to_bng_intersection</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="va">geom</span>, </span>
<span>                                          resolution <span class="op">=</span> <span class="st">"1km"</span>, </span>
<span>                                          format <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Store the indexed results as a spatial data frame</span></span>
<span><span class="va">bng_idx_geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">st_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">bng_idx_geoms</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Store the intersected BNGReference grid squares for context</span></span>
<span><span class="va">bng_grid_geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_to_bbox.html">bng_to_grid_geom</a></span><span class="op">(</span><span class="va">bng_idx_geoms</span><span class="op">$</span><span class="va">bng_reference</span>, </span>
<span>                                   format <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Categorical colours</span></span>
<span><span class="co"># https://github.com/OrdnanceSurvey/GeoDataViz-Toolkit/blob/master/Colours/GDV%20colour%20palettes_v0.9.1.pdf</span></span>
<span><span class="va">catcols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#FF1F5B"</span>, <span class="st">"#009ADE"</span>, <span class="st">"#FFC61E"</span>, <span class="st">"#AF58BA"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot geometries representing the intersection between the geometry and the BNG grid squares</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bng_idx_geoms</span><span class="op">)</span>,</span>
<span>     col <span class="op">=</span> <span class="va">catcols</span>,</span>
<span>     lwd <span class="op">=</span> <span class="fl">3</span>,</span>
<span>     extent <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="va">bng_grid_geoms</span><span class="op">)</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Decomposition of LineString Geometry into BNG Grid Squares at a 1km Resolution"</span>,</span>
<span>     cex.main <span class="op">=</span> <span class="fl">.8</span>,</span>
<span>     axes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Easting"</span>,</span>
<span>     ylab <span class="op">=</span> <span class="st">"Northing"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot intersected BNGReference grid squares for context</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bng_grid_geoms</span><span class="op">)</span>,</span>
<span>     col <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>     border <span class="op">=</span> <span class="st">"#00000075"</span>,</span>
<span>     lty <span class="op">=</span> <span class="st">"dashed"</span>,</span>
<span>     add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="osbng_overview_files/figure-html/unnamed-chunk-21-1.png" width="624"></p>
</div>
</div>
<div class="section level4">
<h4 id="polygon">Polygon<a class="anchor" aria-label="anchor" href="#polygon"></a>
</h4>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a geos Polygon geometry from Well Known Text (WKT)</span></span>
<span><span class="va">geom</span> <span class="op">&lt;-</span> <span class="fu">geos</span><span class="fu">::</span><span class="fu"><a href="https://paleolimbot.github.io/geos/reference/geos_read_wkt.html" class="external-link">geos_read_wkt</a></span><span class="op">(</span><span class="st">"POLYGON ((436661.45305455 115784.01571607, 437629.10896848 116112.11767069, 438229.486575 115953.45344189, 437990.51082297 114935.84767816, 436630.11197232 115085.69722758, 436661.45305455 115784.01571607))"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return a list of the BNGRefernce objects intersected by the geometry at a 500m resolution</span></span>
<span><span class="fu"><a href="../reference/geom_to_bng.html">geom_to_bng</a></span><span class="op">(</span><span class="va">geom</span>, resolution <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; &lt;BNGReference[14] with Resolution=500m&gt;</span></span>
<span><span class="co">#&gt;  [1] &lt;SU 37 14 NW&gt; &lt;SU 37 14 NE&gt; &lt;SU 38 14 NW&gt; &lt;SU 36 15 SE&gt; &lt;SU 37 15 SW&gt;</span></span>
<span><span class="co">#&gt;  [6] &lt;SU 37 15 SE&gt; &lt;SU 38 15 SW&gt; &lt;SU 36 15 NE&gt; &lt;SU 37 15 NW&gt; &lt;SU 37 15 NE&gt;</span></span>
<span><span class="co">#&gt; [11] &lt;SU 38 15 NW&gt; &lt;SU 37 16 SW&gt; &lt;SU 37 16 SE&gt; &lt;SU 38 16 SW&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return a nested list of the indexed geometry and BNGReference objects for the geometry at 500m resolution</span></span>
<span><span class="fu"><a href="../reference/geom_to_bng.html">geom_to_bng_intersection</a></span><span class="op">(</span><span class="va">geom</span>, resolution <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]]$BNGReference</span></span>
<span><span class="co">#&gt; &lt;BNGReference[14] with Resolution=500m&gt;</span></span>
<span><span class="co">#&gt;  [1] &lt;SU 37 14 NW&gt; &lt;SU 37 14 NE&gt; &lt;SU 38 14 NW&gt; &lt;SU 36 15 SE&gt; &lt;SU 37 15 SW&gt;</span></span>
<span><span class="co">#&gt;  [6] &lt;SU 37 15 SE&gt; &lt;SU 38 15 SW&gt; &lt;SU 36 15 NE&gt; &lt;SU 37 15 NW&gt; &lt;SU 37 15 NE&gt;</span></span>
<span><span class="co">#&gt; [11] &lt;SU 38 15 NW&gt; &lt;SU 37 16 SW&gt; &lt;SU 37 16 SE&gt; &lt;SU 38 16 SW&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$is_core</span></span>
<span><span class="co">#&gt;  [1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE</span></span>
<span><span class="co">#&gt; [13] FALSE FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$geom</span></span>
<span><span class="co">#&gt; &lt;geos_geometry[14]&gt;</span></span>
<span><span class="co">#&gt;  [1] &lt;POLYGON ((437408.10837 115000, 437500 115000, 437500 114989.87803, 437408.10837 115000))&gt;                                 </span></span>
<span><span class="co">#&gt;  [2] &lt;POLYGON [437500 114936...438000 115000]&gt;                                                                                  </span></span>
<span><span class="co">#&gt;  [3] &lt;POLYGON ((438000 114976.25446, 438000 115000, 438005.57643 115000, 438000 114976.25446))&gt;                                 </span></span>
<span><span class="co">#&gt;  [4] &lt;POLYGON ((436630.11197 115085.69723, 436648.70621 115500, 437000 115500, 437000 115044.95362, 436630.11197 115085.69723))&gt;</span></span>
<span><span class="co">#&gt;  [5] &lt;POLYGON [437000 115000...437500 115500]&gt;                                                                                  </span></span>
<span><span class="co">#&gt;  [6] &lt;POLYGON ((437500 115000, 438000 115000, 438000 115500, 437500 115500, 437500 115000))&gt;                                    </span></span>
<span><span class="co">#&gt;  [7] &lt;POLYGON ((438005.57643 115000, 438000 115000, 438000 115500, 438122.99703 115500, 438005.57643 115000))&gt;                  </span></span>
<span><span class="co">#&gt;  [8] &lt;POLYGON ((437000 115898.80643, 437000 115500, 436648.70621 115500, 436661.45305 115784.01572, 437000 115898.80643))&gt;      </span></span>
<span><span class="co">#&gt;  [9] &lt;POLYGON [437000 115500...437500 116000]&gt;                                                                                  </span></span>
<span><span class="co">#&gt; [10] &lt;POLYGON ((437500 115500, 438000 115500, 438000 116000, 437500 116000, 437500 115500))&gt;                                    </span></span>
<span><span class="co">#&gt; [11] &lt;POLYGON [438000 115500...438229 116000]&gt;                                                                                  </span></span>
<span><span class="co">#&gt; [12] &lt;POLYGON ((437500 116068.34084, 437500 116000, 437298.44551 116000, 437500 116068.34084))&gt;                                 </span></span>
<span><span class="co">#&gt; [13] &lt;POLYGON [437500 116000...438000 116112]&gt;                                                                                  </span></span>
<span><span class="co">#&gt; [14] &lt;POLYGON ((438053.3567 116000, 438000 116000, 438000 116014.10079, 438053.3567 116000))&gt;</span></span></code></pre></div>
<div class="section level5">
<h5 id="visualise-the-results-1">Visualise the results<a class="anchor" aria-label="anchor" href="#visualise-the-results-1"></a>
</h5>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return the indexed results</span></span>
<span><span class="va">bng_idx_geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/geom_to_bng.html">geom_to_bng_intersection</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="va">geom</span>, </span>
<span>                                          resolution <span class="op">=</span> <span class="fl">500</span>, </span>
<span>                                          format <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Store the indexed results as a spatial data frame</span></span>
<span><span class="va">bng_idx_geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">st_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">bng_idx_geoms</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Store the intersected BNGReference grid squares for context</span></span>
<span><span class="va">bng_grid_geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_to_bbox.html">bng_to_grid_geom</a></span><span class="op">(</span><span class="va">bng_idx_geoms</span><span class="op">$</span><span class="va">bng_reference</span>, </span>
<span>                                   format <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot core and edge geoemtries</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bng_idx_geoms</span><span class="op">[</span><span class="st">"is_core"</span><span class="op">]</span>,</span>
<span>     border <span class="op">=</span> <span class="st">"#fff"</span>,</span>
<span>     col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#009ade"</span>, <span class="st">"#ff1f5b"</span><span class="op">)</span><span class="op">[</span><span class="va">bng_idx_geoms</span><span class="op">$</span><span class="va">is_core</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Decomposition of Polygon Geometry into BNG Grid Squares at a 500m Resolution"</span>,</span>
<span>     cex.main <span class="op">=</span> <span class="fl">.8</span>,</span>
<span>     axes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Easting"</span>,</span>
<span>     ylab <span class="op">=</span> <span class="st">"Northing"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">1</span>, </span>
<span>       title <span class="op">=</span> <span class="st">"is_core"</span>,</span>
<span>       legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"True"</span>, <span class="st">"False"</span><span class="op">)</span>,  </span>
<span>       fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#ff1f5b"</span>, <span class="st">"#009ade"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="osbng_overview_files/figure-html/unnamed-chunk-26-1.png" width="624"></p>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="hierarchy">Hierarchy<a class="anchor" aria-label="anchor" href="#hierarchy"></a>
</h2>
<p><code>osbng</code> provides functionality to navigate the
hierarchical structure of the BNG index system. Traversal of this
hierarchy is enabled by functions providing methods to return the parent
and children of <code>BNGReference</code> objects at specified
resolutions.</p>
<p>Parent and child definitions:</p>
<ul>
<li><p><strong>Parent</strong>: The parent of a
<code>BNGReference</code> object is the grid square at the next higher
(i.e. coarser) resolution level that contains the current reference. For
example, the parent of a 1km grid square reference would be the 5km grid
square that contains it.</p></li>
<li><p><strong>Children</strong>: The children of a
<code>BNGReference</code> object are the grid squares at the next lower
(i.e. finer) resolution level that are contained within the current
reference. For example, the children of a 10km grid square reference
would be the 5km grid squares that it contains.</p></li>
<li><p>While parent and child derivation defaults to the next higher and
lower lower resolution, respectively, <strong>any</strong> supported
resolution in the hiearchy can be specified.</p></li>
</ul>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert a BNG reference string into a BNGReference object</span></span>
<span><span class="va">bng_ref</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU 372 155"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The resolution of the BNGReference object as a descriptive label</span></span>
<span><span class="fu"><a href="../reference/get_bng_resolution.html">get_bng_resolution_string</a></span><span class="op">(</span><span class="va">bng_ref</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "100m"</span></span></code></pre></div>
<div class="section level3">
<h3 id="parent">Parent<a class="anchor" aria-label="anchor" href="#parent"></a>
</h3>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return the parent BNGReference object at the next higher resolution</span></span>
<span><span class="fu"><a href="../reference/bng_to_children.html">bng_to_parent</a></span><span class="op">(</span><span class="va">bng_ref</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;BNGReference[1] with Resolution=500m&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;SU 37 15 NW&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return the parent BNGReference object at a custom higher resolution</span></span>
<span><span class="fu"><a href="../reference/bng_to_children.html">bng_to_parent</a></span><span class="op">(</span><span class="va">bng_ref</span>, resolution <span class="op">=</span> <span class="st">"50km"</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;BNGReference[1] with Resolution=50km&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;SU SW&gt;</span></span></code></pre></div>
<div class="section level4">
<h4 id="visualise-the-results-2">Visualise the results<a class="anchor" aria-label="anchor" href="#visualise-the-results-2"></a>
</h4>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return the parent BNGReference object</span></span>
<span><span class="va">bng_ref_parent</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_to_children.html">bng_to_parent</a></span><span class="op">(</span><span class="va">bng_ref</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Store the BNGReference grid squares</span></span>
<span><span class="va">bng_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_to_bbox.html">bng_to_grid_geom</a></span><span class="op">(</span><span class="va">bng_ref</span>, format <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span><span class="va">bng_parent_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_to_bbox.html">bng_to_grid_geom</a></span><span class="op">(</span><span class="va">bng_ref_parent</span>, format <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the parent BNGReference grid square</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bng_parent_geom</span><span class="op">)</span>,</span>
<span>     col <span class="op">=</span> <span class="st">"gray80"</span>,</span>
<span>     border <span class="op">=</span> <span class="st">"#00000075"</span>,</span>
<span>     lty <span class="op">=</span> <span class="st">"dashed"</span>,</span>
<span>     lwd <span class="op">=</span> <span class="fl">2</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"500m Resolution Parent of a 100m Resolution BNG Grid Square"</span>,</span>
<span>     cex.main <span class="op">=</span> <span class="fl">.9</span>,</span>
<span>     axes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Easting"</span>,</span>
<span>     ylab <span class="op">=</span> <span class="st">"Northing"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the original BNGReference grid square</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bng_geom</span><span class="op">)</span>,</span>
<span>     col <span class="op">=</span> <span class="st">"#AF58BA"</span>,</span>
<span>     add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="osbng_overview_files/figure-html/unnamed-chunk-30-1.png" width="624"></p>
</div>
</div>
<div class="section level3">
<h3 id="children">Children<a class="anchor" aria-label="anchor" href="#children"></a>
</h3>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return the children of the BNGReference object at the next lower resolution</span></span>
<span><span class="fu"><a href="../reference/bng_to_children.html">bng_to_children</a></span><span class="op">(</span><span class="va">bng_ref</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; &lt;BNGReference[4] with Resolution=50m&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;SU 372 155 SW&gt; &lt;SU 372 155 SE&gt; &lt;SU 372 155 NW&gt; &lt;SU 372 155 NE&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return the children of the BNGReference object at a custom lower resolution</span></span>
<span><span class="fu"><a href="../reference/bng_to_children.html">bng_to_children</a></span><span class="op">(</span><span class="va">bng_ref</span>, resolution <span class="op">=</span> <span class="st">"10m"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; &lt;BNGReference[100] with Resolution=10m&gt;</span></span>
<span><span class="co">#&gt;   [1] &lt;SU 3720 1550&gt; &lt;SU 3721 1550&gt; &lt;SU 3722 1550&gt; &lt;SU 3723 1550&gt; &lt;SU 3724 1550&gt;</span></span>
<span><span class="co">#&gt;   [6] &lt;SU 3725 1550&gt; &lt;SU 3726 1550&gt; &lt;SU 3727 1550&gt; &lt;SU 3728 1550&gt; &lt;SU 3729 1550&gt;</span></span>
<span><span class="co">#&gt;  [11] &lt;SU 3720 1551&gt; &lt;SU 3721 1551&gt; &lt;SU 3722 1551&gt; &lt;SU 3723 1551&gt; &lt;SU 3724 1551&gt;</span></span>
<span><span class="co">#&gt;  [16] &lt;SU 3725 1551&gt; &lt;SU 3726 1551&gt; &lt;SU 3727 1551&gt; &lt;SU 3728 1551&gt; &lt;SU 3729 1551&gt;</span></span>
<span><span class="co">#&gt;  [21] &lt;SU 3720 1552&gt; &lt;SU 3721 1552&gt; &lt;SU 3722 1552&gt; &lt;SU 3723 1552&gt; &lt;SU 3724 1552&gt;</span></span>
<span><span class="co">#&gt;  [26] &lt;SU 3725 1552&gt; &lt;SU 3726 1552&gt; &lt;SU 3727 1552&gt; &lt;SU 3728 1552&gt; &lt;SU 3729 1552&gt;</span></span>
<span><span class="co">#&gt;  [31] &lt;SU 3720 1553&gt; &lt;SU 3721 1553&gt; &lt;SU 3722 1553&gt; &lt;SU 3723 1553&gt; &lt;SU 3724 1553&gt;</span></span>
<span><span class="co">#&gt;  [36] &lt;SU 3725 1553&gt; &lt;SU 3726 1553&gt; &lt;SU 3727 1553&gt; &lt;SU 3728 1553&gt; &lt;SU 3729 1553&gt;</span></span>
<span><span class="co">#&gt;  [41] &lt;SU 3720 1554&gt; &lt;SU 3721 1554&gt; &lt;SU 3722 1554&gt; &lt;SU 3723 1554&gt; &lt;SU 3724 1554&gt;</span></span>
<span><span class="co">#&gt;  [46] &lt;SU 3725 1554&gt; &lt;SU 3726 1554&gt; &lt;SU 3727 1554&gt; &lt;SU 3728 1554&gt; &lt;SU 3729 1554&gt;</span></span>
<span><span class="co">#&gt;  [51] &lt;SU 3720 1555&gt; &lt;SU 3721 1555&gt; &lt;SU 3722 1555&gt; &lt;SU 3723 1555&gt; &lt;SU 3724 1555&gt;</span></span>
<span><span class="co">#&gt;  [56] &lt;SU 3725 1555&gt; &lt;SU 3726 1555&gt; &lt;SU 3727 1555&gt; &lt;SU 3728 1555&gt; &lt;SU 3729 1555&gt;</span></span>
<span><span class="co">#&gt;  [61] &lt;SU 3720 1556&gt; &lt;SU 3721 1556&gt; &lt;SU 3722 1556&gt; &lt;SU 3723 1556&gt; &lt;SU 3724 1556&gt;</span></span>
<span><span class="co">#&gt;  [66] &lt;SU 3725 1556&gt; &lt;SU 3726 1556&gt; &lt;SU 3727 1556&gt; &lt;SU 3728 1556&gt; &lt;SU 3729 1556&gt;</span></span>
<span><span class="co">#&gt;  [71] &lt;SU 3720 1557&gt; &lt;SU 3721 1557&gt; &lt;SU 3722 1557&gt; &lt;SU 3723 1557&gt; &lt;SU 3724 1557&gt;</span></span>
<span><span class="co">#&gt;  [76] &lt;SU 3725 1557&gt; &lt;SU 3726 1557&gt; &lt;SU 3727 1557&gt; &lt;SU 3728 1557&gt; &lt;SU 3729 1557&gt;</span></span>
<span><span class="co">#&gt;  [81] &lt;SU 3720 1558&gt; &lt;SU 3721 1558&gt; &lt;SU 3722 1558&gt; &lt;SU 3723 1558&gt; &lt;SU 3724 1558&gt;</span></span>
<span><span class="co">#&gt;  [86] &lt;SU 3725 1558&gt; &lt;SU 3726 1558&gt; &lt;SU 3727 1558&gt; &lt;SU 3728 1558&gt; &lt;SU 3729 1558&gt;</span></span>
<span><span class="co">#&gt;  [91] &lt;SU 3720 1559&gt; &lt;SU 3721 1559&gt; &lt;SU 3722 1559&gt; &lt;SU 3723 1559&gt; &lt;SU 3724 1559&gt;</span></span>
<span><span class="co">#&gt;  [96] &lt;SU 3725 1559&gt; &lt;SU 3726 1559&gt; &lt;SU 3727 1559&gt; &lt;SU 3728 1559&gt; &lt;SU 3729 1559&gt;</span></span></code></pre></div>
<div class="section level4">
<h4 id="visualise-the-results-3">Visualise the results<a class="anchor" aria-label="anchor" href="#visualise-the-results-3"></a>
</h4>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return the BNGReference object for the children at 10m resolution</span></span>
<span><span class="va">bng_refs_children</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_to_children.html">bng_to_children</a></span><span class="op">(</span><span class="va">bng_ref</span>, resolution <span class="op">=</span> <span class="st">"10m"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Store the BNGReference grid squares</span></span>
<span><span class="va">bng_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_to_bbox.html">bng_to_grid_geom</a></span><span class="op">(</span><span class="va">bng_ref</span>, format <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span><span class="va">bng_children_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_to_bbox.html">bng_to_grid_geom</a></span><span class="op">(</span><span class="va">bng_refs_children</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, format <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the parent BNGReference grid square</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bng_children_geom</span><span class="op">)</span>,</span>
<span>     col <span class="op">=</span> <span class="st">"gray80"</span>,</span>
<span>     border <span class="op">=</span> <span class="st">"#00000075"</span>,</span>
<span>     lty <span class="op">=</span> <span class="st">"dashed"</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"10m Resolution Children of a 100m Resolution BNG Grid Square"</span>,</span>
<span>     cex.main <span class="op">=</span> <span class="fl">.9</span>,</span>
<span>     axes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Easting"</span>,</span>
<span>     ylab <span class="op">=</span> <span class="st">"Northing"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the original BNGReference grid square</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bng_geom</span><span class="op">)</span>,</span>
<span>     col <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>     border <span class="op">=</span> <span class="st">"#AF58BA"</span>,</span>
<span>     lwd <span class="op">=</span> <span class="fl">3</span>,</span>
<span>     add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="osbng_overview_files/figure-html/unnamed-chunk-33-1.png" width="624"></p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="traversal">Traversal<a class="anchor" aria-label="anchor" href="#traversal"></a>
</h2>
<p>Traversal functionality in <code>osbng</code> includes calculating
distances and neighbours within the BNG index system. It supports
spatial analyses such as distance-constrained nearest neighbour searches
and “distance within” queries by offering:</p>
<ul>
<li>Generation of k-discs and k-rings around a give grid square.</li>
<li>Identification of neighbouring grid squares and checking
adjacency.</li>
<li>Calculating the distance between grid square centroids or
edges.</li>
<li>Retrieving all grid squares within a specified absolute
distance.</li>
</ul>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert a BNG reference string into a BNGReference object</span></span>
<span><span class="va">bng_ref</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU 372 155"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="k-disc">K-disc<a class="anchor" aria-label="anchor" href="#k-disc"></a>
</h3>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return a list of BNGReference objects representing a filled disc around the BNGReference object</span></span>
<span><span class="co">#  up to a grid distance k, including the given central BNGReference object</span></span>
<span><span class="fu"><a href="../reference/bng_kring.html">bng_kdisc</a></span><span class="op">(</span><span class="va">bng_ref</span>, k <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; &lt;BNGReference[25] with Resolution=100m&gt;</span></span>
<span><span class="co">#&gt;  [1] &lt;SU 370 153&gt; &lt;SU 371 153&gt; &lt;SU 372 153&gt; &lt;SU 373 153&gt; &lt;SU 374 153&gt;</span></span>
<span><span class="co">#&gt;  [6] &lt;SU 370 154&gt; &lt;SU 371 154&gt; &lt;SU 372 154&gt; &lt;SU 373 154&gt; &lt;SU 374 154&gt;</span></span>
<span><span class="co">#&gt; [11] &lt;SU 370 155&gt; &lt;SU 371 155&gt; &lt;SU 372 155&gt; &lt;SU 373 155&gt; &lt;SU 374 155&gt;</span></span>
<span><span class="co">#&gt; [16] &lt;SU 370 156&gt; &lt;SU 371 156&gt; &lt;SU 372 156&gt; &lt;SU 373 156&gt; &lt;SU 374 156&gt;</span></span>
<span><span class="co">#&gt; [21] &lt;SU 370 157&gt; &lt;SU 371 157&gt; &lt;SU 372 157&gt; &lt;SU 373 157&gt; &lt;SU 374 157&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return a k-disc of the BNGReference object at a grid distance of k=2</span></span>
<span><span class="va">bng_ref_kdisc</span> <span class="op">=</span> <span class="fu"><a href="../reference/bng_kring.html">bng_kdisc</a></span><span class="op">(</span><span class="va">bng_ref</span>, k <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Store the BNGReference grid squares</span></span>
<span><span class="va">bng_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_to_bbox.html">bng_to_grid_geom</a></span><span class="op">(</span><span class="va">bng_ref</span>, format <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span><span class="va">bng_kdisc_geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_to_bbox.html">bng_to_grid_geom</a></span><span class="op">(</span><span class="va">bng_ref_kdisc</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, format <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the BNGReference grid squares in the k-disc</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bng_kdisc_geoms</span><span class="op">)</span>,</span>
<span>     col <span class="op">=</span> <span class="st">"gray80"</span>,</span>
<span>     border <span class="op">=</span> <span class="st">"#00000075"</span>,</span>
<span>     lty <span class="op">=</span> <span class="st">"dashed"</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"K-Disc Around a BNG Grid Square Where k=2"</span>,</span>
<span>     cex.main <span class="op">=</span> <span class="fl">.9</span>,</span>
<span>     axes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Easting"</span>,</span>
<span>     ylab <span class="op">=</span> <span class="st">"Northing"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the original BNGReference grid square for context</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bng_geom</span><span class="op">)</span>,</span>
<span>     col <span class="op">=</span> <span class="st">"#009ade"</span>,</span>
<span>     add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="osbng_overview_files/figure-html/unnamed-chunk-36-1.png" width="624"></p>
</div>
<div class="section level3">
<h3 id="k-ring">K-ring<a class="anchor" aria-label="anchor" href="#k-ring"></a>
</h3>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return a list of BNGReference objects representing a hollow ring around around </span></span>
<span><span class="co">#  the BNGReference object at a grid distance k</span></span>
<span><span class="fu"><a href="../reference/bng_kring.html">bng_kring</a></span><span class="op">(</span><span class="va">bng_ref</span>, k <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; &lt;BNGReference[8] with Resolution=100m&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;SU 371 154&gt; &lt;SU 372 154&gt; &lt;SU 373 154&gt; &lt;SU 371 155&gt; &lt;SU 373 155&gt;</span></span>
<span><span class="co">#&gt; [6] &lt;SU 371 156&gt; &lt;SU 372 156&gt; &lt;SU 373 156&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return a k-ring of the BNGReference object at a grid distance of k=2</span></span>
<span><span class="va">bng_ref_kring</span> <span class="op">=</span> <span class="fu"><a href="../reference/bng_kring.html">bng_kring</a></span><span class="op">(</span><span class="va">bng_ref</span>, k <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Store the BNGReference grid squares</span></span>
<span><span class="va">bng_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_to_bbox.html">bng_to_grid_geom</a></span><span class="op">(</span><span class="va">bng_ref</span>, format <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span><span class="va">bng_kring_geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_to_bbox.html">bng_to_grid_geom</a></span><span class="op">(</span><span class="va">bng_ref_kring</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, format <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the BNGReference grid squares in the k-disc</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bng_kring_geoms</span><span class="op">)</span>,</span>
<span>     col <span class="op">=</span> <span class="st">"gray80"</span>,</span>
<span>     border <span class="op">=</span> <span class="st">"#00000075"</span>,</span>
<span>     lty <span class="op">=</span> <span class="st">"dashed"</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"K-Ring Around a BNG Grid Square Where k=3"</span>,</span>
<span>     cex.main <span class="op">=</span> <span class="fl">.9</span>,</span>
<span>     axes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Easting"</span>,</span>
<span>     ylab <span class="op">=</span> <span class="st">"Northing"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the original BNGReference grid square for context</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bng_geom</span><span class="op">)</span>,</span>
<span>     col <span class="op">=</span> <span class="st">"#009ade"</span>,</span>
<span>     add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="osbng_overview_files/figure-html/unnamed-chunk-38-1.png" width="624"></p>
</div>
<div class="section level3">
<h3 id="neighbours">Neighbours<a class="anchor" aria-label="anchor" href="#neighbours"></a>
</h3>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert BNG reference strings into BNGReference objects</span></span>
<span><span class="va">bng_ref1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU 372 155"</span><span class="op">)</span></span>
<span><span class="va">bng_ref2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU 371 155"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check if the two BNGReference objects are neighbours</span></span>
<span><span class="fu"><a href="../reference/bng_neighbours.html">bng_is_neighbour</a></span><span class="op">(</span><span class="va">bng_ref1</span>, <span class="va">bng_ref2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="distance">Distance<a class="anchor" aria-label="anchor" href="#distance"></a>
</h3>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert BNG reference strings into BNGReference objects</span></span>
<span><span class="va">bng_ref1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SX"</span><span class="op">)</span></span>
<span><span class="va">bng_ref2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"SU 1 2"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Return the distance between two BNGReference objects in metres</span></span>
<span><span class="co"># The default distance is calculated as the Euclidean distance between the centroids of the grid squares</span></span>
<span><span class="fu"><a href="../reference/bng_distance.html">bng_distance</a></span><span class="op">(</span><span class="va">bng_ref1</span>, <span class="va">bng_ref2</span><span class="op">)</span></span>
<span><span class="co">#&gt;          [,1]</span></span>
<span><span class="co">#&gt; [1,] 181245.7</span></span></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return the distance between two BNGReference objects in metres</span></span>
<span><span class="co"># edge_to_edge=True calculates the distance between the edges of the grid squares</span></span>
<span><span class="fu"><a href="../reference/bng_distance.html">bng_distance</a></span><span class="op">(</span><span class="va">bng_ref1</span>, <span class="va">bng_ref2</span>, edge_to_edge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;          [,1]</span></span>
<span><span class="co">#&gt; [1,] 111803.4</span></span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert BNG reference stringsinto a BNGReference object</span></span>
<span><span class="va">bng_ref</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_bng_reference.html">as_bng_reference</a></span><span class="op">(</span><span class="st">"ST 3 8"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Return all BNGReference objects within a given distance d of the input BNGReference object</span></span>
<span><span class="fu"><a href="../reference/bng_distance.html">bng_dwithin</a></span><span class="op">(</span><span class="va">bng_ref</span>, d <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; &lt;BNGReference[9] with Resolution=10km&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;ST 2 7&gt; &lt;ST 3 7&gt; &lt;ST 4 7&gt; &lt;ST 2 8&gt; &lt;ST 3 8&gt; &lt;ST 4 8&gt; &lt;ST 2 9&gt; &lt;ST 3 9&gt;</span></span>
<span><span class="co">#&gt; [9] &lt;ST 4 9&gt;</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="grids">Grids<a class="anchor" aria-label="anchor" href="#grids"></a>
</h2>
<p><code>osbng</code> provides additional several convenience functions
to generate BNG grid square data within specified bounds as a spatial
data frame. These functions require the <code>sf</code> package to be
available. Grid square data covering the BNG index system bounds is
provided at 100km, 50km, 10km, 5km and 1km resolutions. The functions
are all named <code>bng_grid_&lt;resolution&gt;()</code>. Optionally,
these functions can take a bound box argument to restrict the grids to
specific bounds. Resolutions finer than 1km are not supported in these
functions to avoid accidental memory intensive processing.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create an sf data frame of 100km resolution BNGReference object features</span></span>
<span><span class="va">gdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_grid.html">bng_grid_100km</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">gdf</span></span>
<span><span class="co">#&gt; Simple feature collection with 91 features and 1 field</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 0 ymin: 0 xmax: 7e+05 ymax: 1300000</span></span>
<span><span class="co">#&gt; Projected CRS: OSGB 1936 / British National Grid</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;    bng_reference                       geometry</span></span>
<span><span class="co">#&gt; 1           &lt;SV&gt; POLYGON ((0 0, 1e+05 0, 1e+...</span></span>
<span><span class="co">#&gt; 2           &lt;SW&gt; POLYGON ((1e+05 0, 2e+05 0,...</span></span>
<span><span class="co">#&gt; 3           &lt;SX&gt; POLYGON ((2e+05 0, 3e+05 0,...</span></span>
<span><span class="co">#&gt; 4           &lt;SY&gt; POLYGON ((3e+05 0, 4e+05 0,...</span></span>
<span><span class="co">#&gt; 5           &lt;SZ&gt; POLYGON ((4e+05 0, 5e+05 0,...</span></span>
<span><span class="co">#&gt; 6           &lt;TV&gt; POLYGON ((5e+05 0, 6e+05 0,...</span></span>
<span><span class="co">#&gt; 7           &lt;TW&gt; POLYGON ((6e+05 0, 7e+05 0,...</span></span>
<span><span class="co">#&gt; 8           &lt;SQ&gt; POLYGON ((0 1e+05, 1e+05 1e...</span></span>
<span><span class="co">#&gt; 9           &lt;SR&gt; POLYGON ((1e+05 1e+05, 2e+0...</span></span>
<span><span class="co">#&gt; 10          &lt;SS&gt; POLYGON ((2e+05 1e+05, 3e+0...</span></span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create an sf data frame of 1km resolution BNGReference object features within a bunding box</span></span>
<span></span>
<span><span class="co"># Custom bounding box coordinates</span></span>
<span><span class="co"># (xmin, ymin, xmax, ymax)</span></span>
<span><span class="va">gdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bng_grid.html">bng_grid_1km</a></span><span class="op">(</span><span class="fl">529476</span>, <span class="fl">179654</span>, <span class="fl">532170</span>, <span class="fl">181116</span><span class="op">)</span></span>
<span></span>
<span><span class="va">gdf</span></span>
<span><span class="co">#&gt; Simple feature collection with 12 features and 1 field</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 529000 ymin: 179000 xmax: 533000 ymax: 182000</span></span>
<span><span class="co">#&gt; Projected CRS: OSGB 1936 / British National Grid</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;    bng_reference                       geometry</span></span>
<span><span class="co">#&gt; 1     &lt;TQ 29 79&gt; POLYGON ((529000 179000, 53...</span></span>
<span><span class="co">#&gt; 2     &lt;TQ 30 79&gt; POLYGON ((530000 179000, 53...</span></span>
<span><span class="co">#&gt; 3     &lt;TQ 31 79&gt; POLYGON ((531000 179000, 53...</span></span>
<span><span class="co">#&gt; 4     &lt;TQ 32 79&gt; POLYGON ((532000 179000, 53...</span></span>
<span><span class="co">#&gt; 5     &lt;TQ 29 80&gt; POLYGON ((529000 180000, 53...</span></span>
<span><span class="co">#&gt; 6     &lt;TQ 30 80&gt; POLYGON ((530000 180000, 53...</span></span>
<span><span class="co">#&gt; 7     &lt;TQ 31 80&gt; POLYGON ((531000 180000, 53...</span></span>
<span><span class="co">#&gt; 8     &lt;TQ 32 80&gt; POLYGON ((532000 180000, 53...</span></span>
<span><span class="co">#&gt; 9     &lt;TQ 29 81&gt; POLYGON ((529000 181000, 53...</span></span>
<span><span class="co">#&gt; 10    &lt;TQ 30 81&gt; POLYGON ((530000 181000, 53...</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Chris Jochem, Ordnance Survey Ltd.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
